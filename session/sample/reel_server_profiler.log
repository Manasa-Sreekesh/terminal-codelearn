Profiler result from MyServer -> initialize
Thread ID: 70294018660720
Fiber ID: 70294018656440
Total: 0.000344
Sort by: self_time

 %self      total      self      wait     child     calls  name
 34.88      0.000     0.000     0.000     0.000        1   MyServer#initialize 
 24.13      0.000     0.000     0.000     0.000        1   TCPServer#initialize 
  6.10      0.000     0.000     0.000     0.000        1   Kernel#method 
  3.78      0.000     0.000     0.000     0.000        1   Reel::Server#initialize 
  3.78      0.000     0.000     0.000     0.000        3   Class#new 
  2.62      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  2.62      0.000     0.000     0.000     0.000        1   Celluloid::AsyncProxy#method_missing 
  2.33      0.000     0.000     0.000     0.000        1   Celluloid::IO::Mailbox#<< 
  2.03      0.000     0.000     0.000     0.000        1   Celluloid#async 
  2.03      0.000     0.000     0.000     0.000        1   Celluloid::IO::TCPServer#listen 
  1.45      0.000     0.000     0.000     0.000        1   <Class::Celluloid::Actor>#async 
  1.45      0.000     0.000     0.000     0.000        3   <Class::Thread>#current 
  1.45      0.000     0.000     0.000     0.000        3   Thread#[] 
  1.16      0.000     0.000     0.000     0.000        1   <Class::IO>#new 
  1.16      0.000     0.000     0.000     0.000        1   TCPServer#listen 
  1.16      0.000     0.000     0.000     0.000        1   Method#to_proc 
  1.16      0.000     0.000     0.000     0.000        1   Celluloid::IO::TCPServer#initialize 
  0.87      0.000     0.000     0.000     0.000        1   Hash#initialize 
  0.87      0.000     0.000     0.000     0.000        1   <Class::IO>#allocate 
  0.87      0.000     0.000     0.000     0.000        1   Mutex#unlock 
  0.87      0.000     0.000     0.000     0.000        1   Mutex#lock 
  0.87      0.000     0.000     0.000     0.000        1   Kernel#lambda 
  0.58      0.000     0.000     0.000     0.000        1   Kernel#is_a? 
  0.58      0.000     0.000     0.000     0.000        2   <Class::BasicObject>#allocate 
  0.58      0.000     0.000     0.000     0.000        1   Celluloid::Call#initialize 
  0.58      0.000     0.000     0.000     0.000        1   Celluloid::ActorProxy#async 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> initialize
Thread ID: 70350252976960
Fiber ID: 70350252972820
Total: 0.000318
Sort by: self_time

 %self      total      self      wait     child     calls  name
 34.28      0.000     0.000     0.000     0.000        1   MyServer#initialize 
 24.84      0.000     0.000     0.000     0.000        1   TCPServer#initialize 
  6.29      0.000     0.000     0.000     0.000        1   Kernel#method 
  4.40      0.000     0.000     0.000     0.000        1   Celluloid::IO::Mailbox#<< 
  3.77      0.000     0.000     0.000     0.000        1   Reel::Server#initialize 
  2.83      0.000     0.000     0.000     0.000        3   Class#new 
  2.52      0.000     0.000     0.000     0.000        1   Celluloid::AsyncProxy#method_missing 
  1.89      0.000     0.000     0.000     0.000        3   <Class::Thread>#current 
  1.89      0.000     0.000     0.000     0.000        1   Celluloid::IO::TCPServer#initialize 
  1.89      0.000     0.000     0.000     0.000        1   Celluloid::IO::TCPServer#listen 
  1.57      0.000     0.000     0.000     0.000        1   TCPServer#listen 
  1.57      0.000     0.000     0.000     0.000        1   Celluloid#async 
  1.57      0.000     0.000     0.000     0.000        1   Method#to_proc 
  1.26      0.000     0.000     0.000     0.000        3   Thread#[] 
  1.26      0.000     0.000     0.000     0.000        1   <Class::Celluloid::Actor>#async 
  1.26      0.000     0.000     0.000     0.000        1   <Class::IO>#new 
  0.94      0.000     0.000     0.000     0.000        2   <Class::BasicObject>#allocate 
  0.94      0.000     0.000     0.000     0.000        1   Celluloid::ActorProxy#async 
  0.94      0.000     0.000     0.000     0.000        1   Celluloid::Call#initialize 
  0.94      0.000     0.000     0.000     0.000        1   Kernel#lambda 
  0.63      0.000     0.000     0.000     0.000        1   <Class::IO>#allocate 
  0.63      0.000     0.000     0.000     0.000        1   Mutex#lock 
  0.63      0.000     0.000     0.000     0.000        1   Hash#initialize 
  0.63      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  0.31      0.000     0.000     0.000     0.000        1   Mutex#unlock 
  0.31      0.000     0.000     0.000     0.000        1   Kernel#is_a? 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> initialize
Thread ID: 70350252976960
Fiber ID: 70350253135560
Total: 0.002239
Sort by: self_time

 %self      total      self      wait     child     calls  name
 69.14      0.002     0.002     0.000     0.000        1   <Module::PTY>#spawn 
  5.76      0.002     0.000     0.000     0.002        1   Session::AbstractSession#initialize 
  4.42      0.002     0.000     0.000     0.002        1   TerminalUser#initialize 
  3.66      0.002     0.000     0.000     0.002        1   Session::AbstractSession#pty_open 
  2.14      0.000     0.000     0.000     0.000        5   Session::AbstractSession#hasopt 
  1.92      0.002     0.000     0.000     0.002        4   Class#new 
  1.92      0.000     0.000     0.000     0.000        1   Session::AbstractSession#_initialize 
  1.65      0.000     0.000     0.000     0.000       21   Hash#has_key? 
  1.34      0.000     0.000     0.000     0.000        1   Thread#initialize 
  1.07      0.000     0.000     0.000     0.000        2   StringIO#initialize 
  1.03      0.000     0.000     0.000     0.000        2   Session::AbstractSession#getopt 
  0.94      0.000     0.000     0.000     0.000        1   <Class::Thread>#new 
  0.85      0.000     0.000     0.000     0.000        7   String#intern 
  0.71      0.000     0.000     0.000     0.000        2   <Class::StringIO>#allocate 
  0.45      0.000     0.000     0.000     0.000        8   NilClass#nil? 
  0.31      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.31      0.000     0.000     0.000     0.000        1   Kernel#lambda 
  0.31      0.000     0.000     0.000     0.000        1   Array#each 
  0.27      0.000     0.000     0.000     0.000        1   Hash#update 
  0.27      0.000     0.000     0.000     0.000        1   <Class::Session::AbstractSession>#default_prog 
  0.27      0.000     0.000     0.000     0.000        5   Kernel#class 
  0.22      0.000     0.000     0.000     0.000        2   <Class::IO>#allocate 
  0.22      0.000     0.000     0.000     0.000        2   BasicObject#initialize 
  0.18      0.000     0.000     0.000     0.000        1   Session::AbstractSession#hashify 
  0.18      0.000     0.000     0.000     0.000        1   <Class::Mutex>#allocate 
  0.13      0.000     0.000     0.000     0.000        1   Enumerable#inject 
  0.13      0.000     0.000     0.000     0.000        1   <Class::Thread>#current 
  0.09      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  0.09      0.000     0.000     0.000     0.000        1   Mutex#initialize 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> insert_mongodb
Thread ID: 70350252976960
Fiber ID: 70350253135560
Total: 0.003423
Sort by: self_time

 %self      total      self      wait     child     calls  name
  2.48      0.001     0.000     0.000     0.000        1   Timeout#timeout 
  2.31      0.000     0.000     0.000     0.000       10   Moped::Threaded#stack 
  2.10      0.000     0.000     0.000     0.000        7   <Module::Kernel>#select 
  2.10      0.000     0.000     0.000     0.000        1   TCPSocket#initialize 
  1.93      0.000     0.000     0.000     0.000        1   Time#to_s 
  1.90      0.001     0.000     0.000     0.001        3   Moped::Connection#with_connection 
  1.64      0.000     0.000     0.000     0.000       14  *Class#new 
  1.55      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Hash::ClassMethods#__bson_load__ 
  1.49      0.000     0.000     0.000     0.000        3   BasicSocket#setsockopt 
  1.46      0.002     0.000     0.000     0.002        2   Moped::Node#ensure_connected 
  1.34      0.000     0.000     0.000     0.000       23   Array#pack 
  1.34      0.003     0.000     0.000     0.003        6  *Array#each 
  1.29      0.000     0.000     0.000     0.000        7   Moped::Sockets::Connectable#alive? 
  1.23      0.003     0.000     0.000     0.003        1   MyServer#handle_request 
  1.20      0.000     0.000     0.000     0.000        1   <Class::Thread>#start 
  1.14      0.001     0.000     0.000     0.001        5   Array#map 
  1.11      0.000     0.000     0.000     0.000        2   IO#write 
  1.08      0.000     0.000     0.000     0.000        4   Moped::BSON::Extensions::String#__bson_dump__ 
  1.05      0.002     0.000     0.000     0.002        1   Moped::Node#refresh 
  1.05      0.000     0.000     0.000     0.000       10   Moped::BSON::Extensions::String#to_utf8_binary 
  0.93      0.000     0.000     0.000     0.000        7   Moped::Node#connection 
  0.88      0.002     0.000     0.000     0.002        2   Moped::Node#logging 
  0.82      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#initialize 
  0.82      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize 
  0.79      0.002     0.000     0.000     0.002        1   Moped::Cluster#nodes 
  0.79      0.000     0.000     0.000     0.000        5   Moped::Sockets::Connectable#handle_socket_errors 
  0.79      0.000     0.000     0.000     0.000        2   Moped::BSON::Extensions::Hash#__bson_dump__ 
  0.76      0.000     0.000     0.000     0.000       10   Thread#[] 
  0.76      0.000     0.000     0.000     0.000        6   Moped::BSON::Extensions::String#to_bson_cstring 
  0.73      0.000     0.000     0.000     0.000        4   Moped::Threaded#executing? 
  0.73      0.003     0.000     0.000     0.003        1   Moped::Session#with 
  0.70      0.000     0.000     0.000     0.000        1   Logger#initialize 
  0.70      0.000     0.000     0.000     0.000        9   Hash#[]= 
  0.70      0.000     0.000     0.000     0.000       11   <Class::BasicObject>#allocate 
  0.70      0.003     0.000     0.000     0.003        1   Moped::Session::Context#with_node 
  0.67      0.000     0.000     0.000     0.000        1   <Class::IO>#new 
  0.67      0.000     0.000     0.000     0.000       10   String#encode 
  0.67      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_primary 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Sockets::TCP#initialize 
  0.64      0.002     0.000     0.000     0.002        2   Moped::Node#flush 
  0.61      0.000     0.000     0.000     0.000        7   IO::readable#readbyte 
  0.61      0.000     0.000     0.000     0.000        2   Hash#each 
  0.61      0.000     0.000     0.000     0.000       11   <Class::Thread>#current 
  0.61      0.000     0.000     0.000     0.000        1   Moped::Session#initialize_copy 
  0.58      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize 
  0.58      0.002     0.000     0.000     0.002        1   Moped::Cluster#refresh 
  0.58      0.002     0.000     0.000     0.002        2   Moped::Node#process 
  0.58      0.000     0.000     0.000     0.000        5   StringIO#read 
  0.56      0.000     0.000     0.000     0.000        2   Moped::Connection#read_data 
  0.56      0.000     0.000     0.000     0.000        1   Logger::LogDevice#initialize 
  0.56      0.000     0.000     0.000     0.000        2   Moped::BSON::Extensions::Integer#__bson_dump__ 
  0.50      0.000     0.000     0.000     0.000       15   String#force_encoding 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#flags_as_int 
  0.50      0.002     0.000     0.000     0.002        1   Moped::Node#command 
  0.50      0.000     0.000     0.000     0.000        5   Moped::BSON::Extensions::String#from_utf8_binary 
  0.50      0.000     0.000     0.000     0.000        2   Moped::Logging#logger 
  0.47      0.000     0.000     0.000     0.000        1   Moped::Protocol::Command#initialize 
  0.47      0.000     0.000     0.000     0.000        3   Moped::Threaded#end 
  0.47      0.000     0.000     0.000     0.000       12   String#bytesize 
  0.47      0.000     0.000     0.000     0.000        5   Fixnum#* 
  0.47      0.000     0.000     0.000     0.000       12   Hash#[] 
  0.44      0.000     0.000     0.000     0.000        6   String#include? 
  0.44      0.001     0.000     0.000     0.001        2   Moped::Connection#receive_replies 
  0.44      0.000     0.000     0.000     0.000        1   Moped::Session#[] 
  0.44      0.003     0.000     0.000     0.003        1   Moped::Collection#insert 
  0.41      0.000     0.000     0.000     0.000        1   MonitorMixin#initialize 
  0.41      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#flags_from_int 
  0.41      0.000     0.000     0.000     0.000        2   Moped::Protocol::Query#serialize_length 
  0.41      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#read 
  0.41      0.000     0.000     0.000     0.000        1   Moped::Node#generate_peers 
  0.38      0.000     0.000     0.000     0.000        3   Moped::Threaded#begin 
  0.38      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#initialize 
  0.38      0.003     0.000     0.000     0.003        1   Moped::Cluster#with_primary 
  0.38      0.000     0.000     0.000     0.000        1   Thread#join 
  0.38      0.000     0.000     0.000     0.000        2   Logger#debug? 
  0.38      0.000     0.000     0.000     0.000        2   Moped::Node#connected? 
  0.38      0.000     0.000     0.000     0.000        4   Moped::Sockets::Connectable#check_if_alive! 
  0.38      0.000     0.000     0.000     0.000        5   String#unpack 
  0.38      0.001     0.000     0.000     0.001        1   Moped::Connection#connect 
  0.38      0.000     0.000     0.000     0.000        7   Symbol#to_s 
  0.35      0.000     0.000     0.000     0.000        2   Hash#initialize_copy 
  0.35      0.000     0.000     0.000     0.000        1   MonitorMixin#mon_initialize 
  0.35      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Time::ClassMethods#__bson_load__ 
  0.35      0.001     0.000     0.000     0.001        2   Moped::Connection#write 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Cluster#max_retries 
  0.35      0.000     0.000     0.000     0.000        1   Thread#kill 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_full_collection_name 
  0.35      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#write 
  0.32      0.001     0.000     0.000     0.001        1   Moped::Node#connect 
  0.32      0.000     0.000     0.000     0.000        2   Moped::Connection#connected? 
  0.32      0.000     0.000     0.000     0.000        1   Moped::Logging#default_logger 
  0.32      0.000     0.000     0.000     0.000        2   Integer#times 
  0.32      0.000     0.000     0.000     0.000        2   <Class::Time>#allocate 
  0.32      0.000     0.000     0.000     0.000        1   Moped::Connection#initialize 
  0.32      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#command_failure? 
  0.32      0.001     0.000     0.000     0.001        1   Moped::Sockets::Connectable::ClassMethods#connect 
  0.32      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#serialize_length 
  0.29      0.000     0.000     0.000     0.000        1   Moped::Node#needs_refresh? 
  0.29      0.000     0.000     0.000     0.000        2   Array#zip 
  0.29      0.000     0.000     0.000     0.000        1   Moped::Node#hash 
  0.29      0.000     0.000     0.000     0.000        1   Moped::Collection#initialize 
  0.29      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#flags= 
  0.29      0.000     0.000     0.000     0.000        1   Hash#merge 
  0.29      0.000     0.000     0.000     0.000        2   Time#- 
  0.29      0.000     0.000     0.000     0.000        4   String#[]= 
  0.29      0.000     0.000     0.000     0.000        6   Array#empty? 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags_as_int 
  0.26      0.000     0.000     0.000     0.000        2   IO#eof? 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_op_code 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Logging#rails_logger 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Database#[] 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Node#resolve_address 
  0.26      0.000     0.000     0.000     0.000        1   <Class::Class>#allocate 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Session#current_database 
  0.26      0.000     0.000     0.000     0.000        2   <Class::Moped::BSON::Document>#serialize 
  0.26      0.000     0.000     0.000     0.000        5   StringIO#gets 
  0.26      0.000     0.000     0.000     0.000        1   Time#utc 
  0.26      0.000     0.000     0.000     0.000        1   Array#reject 
  0.23      0.000     0.000     0.000     0.000        2   Moped::BSON::Extensions::Integer::ClassMethods#__bson_load__ 
  0.23      0.000     0.000     0.000     0.000        3   Array#push 
  0.23      0.003     0.000     0.000     0.003        1   Moped::Session::Context#insert 
  0.23      0.000     0.000     0.000     0.000        2   Moped::Protocol::Query#length 
  0.23      0.000     0.000     0.000     0.000        2   Moped::Node#down? 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_selector 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Connection#read 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Session::Context#safe? 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Session::Context#consistency 
  0.23      0.000     0.000     0.000     0.000        3   <Class::Hash>#allocate 
  0.23      0.000     0.000     0.000     0.000        1   Proc#[] 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_response_to 
  0.23      0.000     0.000     0.000     0.000        1   <Class::IO>#allocate 
  0.23      0.000     0.000     0.000     0.000        1   <Class::Time>#at 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Session::Context#cluster 
  0.23      0.000     0.000     0.000     0.000        1   IO#set_encoding 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_skip 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_response_to 
  0.20      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Float::ClassMethods#__bson_load__ 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_flags 
  0.20      0.000     0.000     0.000     0.000        7   StringIO#getbyte 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_request_id 
  0.20      0.000     0.000     0.000     0.000        4   Fixnum#divmod 
  0.20      0.000     0.000     0.000     0.000        2   Moped::Protocol::Reply#count 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#error_message 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_full_collection_name 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Session#safety 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Session#consistency 
  0.20      0.000     0.000     0.000     0.000        3   Array#pop 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_interval 
  0.20      0.000     0.000     0.000     0.000        1   Class#initialize 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#receive_replies 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_request_id 
  0.20      0.000     0.000     0.000     0.000        2   Kernel#respond_to? 
  0.20      0.000     0.000     0.000     0.000        1   <Class::Mutex>#allocate 
  0.20      0.000     0.000     0.000     0.000        8   Array#include? 
  0.20      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_flags 
  0.18      0.000     0.000     0.000     0.000        2   Array#transpose 
  0.18      0.000     0.000     0.000     0.000        4   Fixnum#<=> 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_op_code 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Cluster#auth 
  0.18      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Node#apply_auth 
  0.18      0.000     0.000     0.000     0.000        2   Time#initialize 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_limit 
  0.18      0.000     0.000     0.000     0.000        2   Fixnum#- 
  0.18      0.000     0.000     0.000     0.000        1   Symbol#to_proc 
  0.18      0.001     0.000     0.000     0.001        1   Moped::Node#insert 
  0.18      0.000     0.000     0.000     0.000        1   Enumerable#partition 
  0.18      0.000     0.000     0.000     0.000        1   Enumerable#find 
  0.18      0.000     0.000     0.000     0.000        2   IO#read 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_peers 
  0.18      0.000     0.000     0.000     0.000        2   Array#last 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Session#safe? 
  0.18      0.000     0.000     0.000     0.000        1   Fixnum#== 
  0.18      0.000     0.000     0.000     0.000        2  *Kernel#dup 
  0.18      0.000     0.000     0.000     0.000        3   Fixnum#+ 
  0.15      0.000     0.000     0.000     0.000        5   String#encode! 
  0.15      0.000     0.000     0.000     0.000        2   Kernel#is_a? 
  0.15      0.000     0.000     0.000     0.000        1   Class#allocate 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_fields 
  0.15      0.000     0.000     0.000     0.000        5   String#chop! 
  0.15      0.000     0.000     0.000     0.000        2   Bignum#<=> 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Node#arbiter? 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_documents 
  0.15      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Boolean::ClassMethods#__bson_load__ 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Session::Context#initialize 
  0.15      0.000     0.000     0.000     0.000        1   Array#uniq 
  0.15      0.000     0.000     0.000     0.000        3  *Kernel#initialize_dup 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#request_id 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#length 
  0.12      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#length 
  0.12      0.000     0.000     0.000     0.000        1   Logger::Formatter#initialize 
  0.12      0.000     0.000     0.000     0.000        3   Kernel#nil? 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#op_code 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Node#primary? 
  0.12      0.000     0.000     0.000     0.000        1   Fixnum#zero? 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#response_to 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#op_code 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Cluster#down_interval 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#flags 
  0.12      0.000     0.000     0.000     0.000        1   Kernel#remove_instance_variable 
  0.12      0.000     0.000     0.000     0.000        1   <Class::Moped::BSON::Document>#deserialize 
  0.12      0.000     0.000     0.000     0.000        1   Thread#[]= 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#skip 
  0.12      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.12      0.000     0.000     0.000     0.000        1   Numeric#quo 
  0.12      0.000     0.000     0.000     0.000        1   Symbol#== 
  0.09      0.000     0.000     0.000     0.000        2   Array#clear 
  0.09      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Object#__safe_options__ 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Cluster#member? 
  0.09      0.000     0.000     0.000     0.000        1   Enumerator#each 
  0.09      0.000     0.000     0.000     0.000        1   Mutex#initialize 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Protocol::Message#receive_replies 
  0.09      0.000     0.000     0.000     0.000        1   Rational#/ 
  0.09      0.000     0.000     0.000     0.000        2   BasicObject#initialize 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#response_to 
  0.09      0.000     0.000     0.000     0.000        1   String#hash 
  0.09      0.000     0.000     0.000     0.000        1   StringIO#initialize 
  0.09      0.000     0.000     0.000     0.000        1   Array#concat 
  0.09      0.000     0.000     0.000     0.000        1   BasicObject#!= 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#request_id 
  0.09      0.000     0.000     0.000     0.000        1   NilClass#nil? 
  0.09      0.000     0.000     0.000     0.000        1   Integer#round 
  0.09      0.000     0.000     0.000     0.000        1   Kernel#proc 
  0.09      0.000     0.000     0.000     0.000        1   Array#first 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#limit 
  0.09      0.000     0.000     0.000     0.000        1   Class#inherited 
  0.06      0.000     0.000     0.000     0.000        3   Fixnum#& 
  0.06      0.000     0.000     0.000     0.000        1   Moped::Node#auth 
  0.06      0.000     0.000     0.000     0.000        1   Hash#update 
  0.06      0.000     0.000     0.000     0.000        1   BasicObject#== 
  0.06      0.000     0.000     0.000     0.000        1   Hash#initialize 
  0.06      0.000     0.000     0.000     0.000        1   Hash#== 
  0.06      0.000     0.000     0.000     0.000        1   Enumerable#map 
  0.06      0.000     0.000     0.000     0.000        1   <Class::StringIO>#allocate 
  0.03      0.000     0.000     0.000     0.000        1   Float#== 
  0.03      0.000     0.000     0.000     0.000        1   Array#to_a 

* indicates recursively called methods
Thread ID: 70350255736120
Fiber ID: 70350255735960
Total: 0.002126
Sort by: self_time

 %self      total      self      wait     child     calls  name
  5.88      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  3.62      0.002     0.000     0.002     0.000        1   Timeout#timeout 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> execute
Thread ID: 70350252976960
Fiber ID: 70350253135560
Total: 0.000709
Sort by: self_time

 %self      total      self      wait     child     calls  name
 20.31      0.000     0.000     0.000     0.000        1   Session::Command#initialize 
 11.71      0.001     0.000     0.000     0.001        1   TerminalUser#execute 
  7.48      0.000     0.000     0.000     0.000        3  *Kernel#inspect 
  5.78      0.000     0.000     0.000     0.000        7   IO#write 
  4.80      0.000     0.000     0.000     0.000        1   Session::AbstractSession#execute 
  4.09      0.000     0.000     0.000     0.000        5   String#% 
  3.10      0.000     0.000     0.000     0.000        3   IO#puts 
  2.82      0.000     0.000     0.000     0.000        1   Kernel#rand 
  2.68      0.000     0.000     0.000     0.000        1   Session::Sh#execute 
  2.40      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  2.26      0.000     0.000     0.000     0.000        1   Hash#inspect 
  2.12      0.000     0.000     0.000     0.000        6   NilClass#inspect 
  1.97      0.000     0.000     0.000     0.000        4   <Class::Regexp>#escape 
  1.55      0.000     0.000     0.000     0.000        1   IO#printf 
  1.55      0.000     0.000     0.000     0.000        1   Array#inspect 
  1.55      0.000     0.000     0.000     0.000        2   String#inspect 
  1.55      0.000     0.000     0.000     0.000        1   Class#new 
  1.55      0.000     0.000     0.000     0.000        1   Symbol#inspect 
  1.55      0.000     0.000     0.000     0.000        2   <Class::Session::Command>#cmdno 
  1.41      0.000     0.000     0.000     0.000        3   IO#inspect 
  1.27      0.000     0.000     0.000     0.000        1   Thread#inspect 
  1.13      0.000     0.000     0.000     0.000        3   Kernel#puts 
  1.13      0.000     0.000     0.000     0.000        3   IO#closed? 
  1.13      0.000     0.000     0.000     0.000        1   Fixnum#to_s 
  1.13      0.000     0.000     0.000     0.000        2   NilClass#to_s 
  1.13      0.000     0.000     0.000     0.000        1   Proc#to_s 
  0.99      0.000     0.000     0.000     0.000        1   Time#usec 
  0.99      0.000     0.000     0.000     0.000        3   Module#=== 
  0.99      0.000     0.000     0.000     0.000        1   Kernel#respond_to_missing? 
  0.99      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.85      0.000     0.000     0.000     0.000        2   Kernel#class 
  0.85      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.85      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  0.71      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  0.71      0.000     0.000     0.000     0.000        1   IO#flush 
  0.56      0.000     0.000     0.000     0.000        1   <Class::Session::Command>#cmdno= 
  0.56      0.000     0.000     0.000     0.000        1   String#to_s 
  0.42      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.42      0.000     0.000     0.000     0.000        1   Fixnum#* 
  0.28      0.000     0.000     0.000     0.000        1   Fixnum#+ 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> block_for_output_to_come
Thread ID: 70350252976960
Fiber ID: 70350253135560
Total: 0.000645
Sort by: self_time

 %self      total      self      wait     child     calls  name
 16.59      0.000     0.000     0.000     0.000        1   Kernel#sleep 
 11.47      0.001     0.000     0.000     0.001        1   TerminalUser#block_for_output_to_come 
  4.34      0.000     0.000     0.000     0.000        1   Kernel#puts 
  3.26      0.000     0.000     0.000     0.000        1   IO#puts 
  2.17      0.000     0.000     0.000     0.000        2   IO#write 
  1.71      0.000     0.000     0.000     0.000        1   StringIO#read 

* indicates recursively called methods
Thread ID: 70350253144280
Fiber ID: 70350256172120
Total: 0.000496
Sort by: self_time

 %self      total      self      wait     child     calls  name
 12.10      0.000     0.000     0.000     0.000        1   IO#readpartial 
 10.08      0.000     0.000     0.000     0.000        1   Regexp#match 
  9.07      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  8.87      0.000     0.000     0.000     0.000        1   Session::AbstractSession#_initialize 
  7.26      0.000     0.000     0.000     0.000        1   IO#puts 
  6.25      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  5.65      0.000     0.000     0.000     0.000        1   Proc#call 
  4.84      0.000     0.000     0.000     0.000        1   Kernel#puts 
  4.44      0.000     0.000     0.000     0.000        3   IO#closed? 
  4.03      0.000     0.000     0.000     0.000        2   IO#write 
  3.43      0.000     0.000     0.000     0.000        3   Module#=== 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> initialize
Thread ID: 70350252976960
Fiber ID: 70350256195200
Total: 0.001956
Sort by: self_time

 %self      total      self      wait     child     calls  name
 74.59      0.001     0.001     0.000     0.000        1   <Module::PTY>#spawn 
  3.78      0.002     0.000     0.000     0.002        1   Session::AbstractSession#initialize 
  3.48      0.002     0.000     0.000     0.002        1   TerminalUser#initialize 
  2.76      0.000     0.000     0.000     0.000        5   Session::AbstractSession#hasopt 
  2.04      0.002     0.000     0.000     0.002        4   Class#new 
  1.43      0.001     0.000     0.000     0.001        1   Session::AbstractSession#pty_open 
  1.28      0.000     0.000     0.000     0.000       21   Hash#has_key? 
  1.12      0.000     0.000     0.000     0.000        1   Thread#initialize 
  1.02      0.000     0.000     0.000     0.000        1   <Class::Thread>#new 
  0.92      0.000     0.000     0.000     0.000        1   Session::AbstractSession#_initialize 
  0.92      0.000     0.000     0.000     0.000        2   Session::AbstractSession#getopt 
  0.61      0.000     0.000     0.000     0.000        7   String#intern 
  0.56      0.000     0.000     0.000     0.000        2   BasicObject#initialize 
  0.51      0.000     0.000     0.000     0.000        8   NilClass#nil? 
  0.51      0.000     0.000     0.000     0.000        1   Array#each 
  0.46      0.000     0.000     0.000     0.000        1   Session::AbstractSession#hashify 
  0.46      0.000     0.000     0.000     0.000        2   <Class::StringIO>#allocate 
  0.46      0.000     0.000     0.000     0.000        2   <Class::IO>#allocate 
  0.46      0.000     0.000     0.000     0.000        2   StringIO#initialize 
  0.41      0.000     0.000     0.000     0.000        1   <Class::Mutex>#allocate 
  0.36      0.000     0.000     0.000     0.000        1   Kernel#lambda 
  0.36      0.000     0.000     0.000     0.000        1   <Class::Session::AbstractSession>#default_prog 
  0.31      0.000     0.000     0.000     0.000        5   Kernel#class 
  0.26      0.000     0.000     0.000     0.000        1   Enumerable#inject 
  0.26      0.000     0.000     0.000     0.000        1   Hash#update 
  0.20      0.000     0.000     0.000     0.000        1   Mutex#initialize 
  0.20      0.000     0.000     0.000     0.000        1   <Class::Thread>#current 
  0.20      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.05      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> insert_mongodb
Thread ID: 70350252976960
Fiber ID: 70350256195200
Total: 0.001346
Sort by: self_time

 %self      total      self      wait     child     calls  name
  5.79      0.000     0.000     0.000     0.000        1   Moped::Database#[] 
  3.79      0.000     0.000     0.000     0.000        6   Moped::Threaded#stack 
  3.71      0.000     0.000     0.000     0.000        4   Moped::BSON::Extensions::String#__bson_dump__ 
  2.97      0.000     0.000     0.000     0.000       12   Array#pack 
  2.90      0.000     0.000     0.000     0.000        1   IO#write 
  2.67      0.000     0.000     0.000     0.000        5   Moped::BSON::Extensions::String#to_bson_cstring 
  2.67      0.000     0.000     0.000     0.000        9   Moped::BSON::Extensions::String#to_utf8_binary 
  2.45      0.001     0.000     0.000     0.001        1   MyServer#handle_request 
  2.45      0.000     0.000     0.000     0.000        1   Time#to_s 
  2.38      0.000     0.000     0.000     0.000        1   Hash#each 
  2.15      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize 
  2.15      0.000     0.000     0.000     0.000        9   String#encode 
  2.01      0.000     0.000     0.000     0.000        2   <Module::Kernel>#select 
  1.78      0.000     0.000     0.000     0.000        5  *Array#each 
  1.63      0.000     0.000     0.000     0.000        4   Class#new 
  1.63      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Hash#__bson_dump__ 
  1.56      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_connected 
  1.41      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_primary 
  1.41      0.000     0.000     0.000     0.000        1   Hash#initialize_copy 
  1.26      0.000     0.000     0.000     0.000        1   Moped::Connection#with_connection 
  1.26      0.000     0.000     0.000     0.000        8   String#bytesize 
  1.19      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#length 
  1.11      0.000     0.000     0.000     0.000        1   Moped::Cluster#nodes 
  1.11      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Integer#__bson_dump__ 
  1.11      0.000     0.000     0.000     0.000        1   Moped::Session#current_database 
  0.97      0.000     0.000     0.000     0.000        6   Thread#[] 
  0.97      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#serialize_length 
  0.89      0.000     0.000     0.000     0.000        1   Moped::Session#[] 
  0.89      0.001     0.000     0.000     0.001        1   Moped::Session#with 
  0.82      0.000     0.000     0.000     0.000        2   Moped::Threaded#executing? 
  0.82      0.001     0.000     0.000     0.001        1   Moped::Node#logging 
  0.82      0.000     0.000     0.000     0.000        1   Array#reject 
  0.82      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#handle_socket_errors 
  0.82      0.000     0.000     0.000     0.000        6   Symbol#to_s 
  0.82      0.000     0.000     0.000     0.000        2   Array#map 
  0.74      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags_as_int 
  0.74      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#alive? 
  0.74      0.000     0.000     0.000     0.000        5   String#include? 
  0.74      0.000     0.000     0.000     0.000        9   String#force_encoding 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Session#initialize_copy 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#initialize 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Collection#initialize 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#write 
  0.67      0.000     0.000     0.000     0.000        4   <Class::BasicObject>#allocate 
  0.67      0.000     0.000     0.000     0.000        2   Moped::Threaded#end 
  0.67      0.000     0.000     0.000     0.000        2   String#[]= 
  0.67      0.001     0.000     0.000     0.001        1   Moped::Session::Context#with_node 
  0.67      0.000     0.000     0.000     0.000        2   Moped::Threaded#begin 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Connection#receive_replies 
  0.59      0.000     0.000     0.000     0.000        2   Time#- 
  0.59      0.001     0.000     0.000     0.001        1   Moped::Collection#insert 
  0.59      0.000     0.000     0.000     0.000        6   <Class::Thread>#current 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_request_id 
  0.52      0.000     0.000     0.000     0.000        3   Fixnum#<=> 
  0.52      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_full_collection_name 
  0.52      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_response_to 
  0.52      0.001     0.000     0.000     0.001        1   Moped::Node#flush 
  0.52      0.000     0.000     0.000     0.000        1   Moped::Node#apply_auth 
  0.52      0.000     0.000     0.000     0.000        4   Fixnum#* 
  0.52      0.000     0.000     0.000     0.000        2  *Kernel#dup 
  0.52      0.000     0.000     0.000     0.000        3   Hash#[]= 
  0.52      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_flags 
  0.52      0.000     0.000     0.000     0.000        3   Moped::Node#connection 
  0.52      0.001     0.000     0.000     0.001        1   Moped::Cluster#with_primary 
  0.45      0.000     0.000     0.000     0.000        2  *Kernel#initialize_dup 
  0.45      0.000     0.000     0.000     0.000        1   <Class::Moped::BSON::Document>#serialize 
  0.45      0.000     0.000     0.000     0.000        2   Array#push 
  0.45      0.001     0.000     0.000     0.001        1   Moped::Connection#write 
  0.45      0.000     0.000     0.000     0.000        2   Moped::Node#down? 
  0.45      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_documents 
  0.45      0.000     0.000     0.000     0.000        2   Array#pop 
  0.45      0.001     0.000     0.000     0.001        1   Moped::Node#process 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#op_code 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_op_code 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#check_if_alive! 
  0.37      0.000     0.000     0.000     0.000        1   Symbol#== 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Connection#connected? 
  0.37      0.001     0.000     0.000     0.001        1   Moped::Node#insert 
  0.37      0.000     0.000     0.000     0.000        3   Array#empty? 
  0.37      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Object#__safe_options__ 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Node#connected? 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Session#safety 
  0.30      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#request_id 
  0.30      0.000     0.000     0.000     0.000        1   Array#last 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#response_to 
  0.30      0.000     0.000     0.000     0.000        1   Thread#[]= 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Cluster#max_retries 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Cluster#auth 
  0.30      0.000     0.000     0.000     0.000        1   Symbol#to_proc 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Session::Context#initialize 
  0.30      0.000     0.000     0.000     0.000        1   Comparable#< 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Session::Context#consistency 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Session#consistency 
  0.22      0.001     0.000     0.000     0.001        1   Moped::Session::Context#insert 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Cluster#member? 
  0.22      0.000     0.000     0.000     0.000        1   Logger#debug? 
  0.22      0.000     0.000     0.000     0.000        2   Bignum#<=> 
  0.22      0.000     0.000     0.000     0.000        1   Array#concat 
  0.22      0.000     0.000     0.000     0.000        1   Array#zip 
  0.22      0.000     0.000     0.000     0.000        1   Array#clear 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_interval 
  0.22      0.000     0.000     0.000     0.000        1   Enumerable#partition 
  0.22      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.22      0.000     0.000     0.000     0.000        2   Fixnum#- 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Node#auth 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Session::Context#cluster 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Session#safe? 
  0.22      0.000     0.000     0.000     0.000        1   Array#to_a 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Session::Context#safe? 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Node#needs_refresh? 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Cluster#down_interval 
  0.22      0.000     0.000     0.000     0.000        1   Kernel#is_a? 
  0.22      0.000     0.000     0.000     0.000        1   Moped::Logging#logger 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Protocol::Message#receive_replies 
  0.15      0.000     0.000     0.000     0.000        1   Time#<=> 
  0.15      0.000     0.000     0.000     0.000        1   Array#include? 
  0.15      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  0.15      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.15      0.000     0.000     0.000     0.000        1   Hash#update 
  0.15      0.000     0.000     0.000     0.000        1   Kernel#remove_instance_variable 
  0.15      0.000     0.000     0.000     0.000        1   Array#transpose 
  0.15      0.000     0.000     0.000     0.000        1   NilClass#nil? 
  0.15      0.000     0.000     0.000     0.000        1   Moped::Node#arbiter? 
  0.15      0.000     0.000     0.000     0.000        1   Integer#round 
  0.15      0.000     0.000     0.000     0.000        1   Kernel#nil? 
  0.15      0.000     0.000     0.000     0.000        1   Enumerable#find 
  0.07      0.000     0.000     0.000     0.000        1   Hash#== 
  0.07      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.07      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.07      0.000     0.000     0.000     0.000        1   Moped::Node#primary? 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> execute
Thread ID: 70350252976960
Fiber ID: 70350256195200
Total: 0.000562
Sort by: self_time

 %self      total      self      wait     child     calls  name
 22.78      0.000     0.000     0.000     0.000        1   Session::Command#initialize 
 10.68      0.001     0.000     0.000     0.001        1   TerminalUser#execute 
  8.90      0.000     0.000     0.000     0.000        3  *Kernel#inspect 
  4.80      0.000     0.000     0.000     0.000        7   IO#write 
  4.45      0.000     0.000     0.000     0.000        5   String#% 
  3.74      0.000     0.000     0.000     0.000        1   Session::AbstractSession#execute 
  3.20      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  3.20      0.000     0.000     0.000     0.000        3   IO#puts 
  2.85      0.000     0.000     0.000     0.000        1   Session::Sh#execute 
  2.49      0.000     0.000     0.000     0.000        4   <Class::Regexp>#escape 
  2.14      0.000     0.000     0.000     0.000        1   Kernel#rand 
  1.78      0.000     0.000     0.000     0.000        1   IO#printf 
  1.60      0.000     0.000     0.000     0.000        6   NilClass#inspect 
  1.60      0.000     0.000     0.000     0.000        1   Hash#inspect 
  1.60      0.000     0.000     0.000     0.000        2   String#inspect 
  1.60      0.000     0.000     0.000     0.000        1   Thread#inspect 
  1.60      0.000     0.000     0.000     0.000        3   IO#inspect 
  1.42      0.000     0.000     0.000     0.000        1   <Class::Session::Command>#cmdno= 
  1.25      0.000     0.000     0.000     0.000        2   <Class::Session::Command>#cmdno 
  1.25      0.000     0.000     0.000     0.000        1   Fixnum#to_s 
  1.25      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  1.07      0.000     0.000     0.000     0.000        1   Proc#to_s 
  1.07      0.000     0.000     0.000     0.000        1   Class#new 
  1.07      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  1.07      0.000     0.000     0.000     0.000        1   Time#usec 
  1.07      0.000     0.000     0.000     0.000        1   Array#inspect 
  1.07      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  1.07      0.000     0.000     0.000     0.000        1   Symbol#inspect 
  1.07      0.000     0.000     0.000     0.000        3   Kernel#puts 
  0.89      0.000     0.000     0.000     0.000        2   NilClass#to_s 
  0.89      0.000     0.000     0.000     0.000        3   IO#closed? 
  0.71      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.71      0.000     0.000     0.000     0.000        1   Kernel#respond_to_missing? 
  0.53      0.000     0.000     0.000     0.000        1   IO#flush 
  0.53      0.000     0.000     0.000     0.000        1   String#to_s 
  0.53      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.53      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  0.53      0.000     0.000     0.000     0.000        2   Kernel#class 
  0.53      0.000     0.000     0.000     0.000        1   Fixnum#* 
  0.36      0.000     0.000     0.000     0.000        3   Module#=== 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> block_for_output_to_come
Thread ID: 70350252976960
Fiber ID: 70350256195200
Total: 0.001133
Sort by: self_time

 %self      total      self      wait     child     calls  name
 13.68      0.001     0.000     0.001     0.000        1   Kernel#sleep 
 10.50      0.000     0.000     0.000     0.000        1   Kernel#puts 
  7.06      0.001     0.000     0.000     0.001        1   TerminalUser#block_for_output_to_come 
  3.18      0.000     0.000     0.000     0.000        1   IO#puts 
  2.91      0.000     0.000     0.000     0.000        2   IO#write 
  0.62      0.000     0.000     0.000     0.000        1   StringIO#read 

* indicates recursively called methods
Thread ID: 70350253144280
Fiber ID: 70350256172120
Total: 0.000911
Sort by: self_time

 %self      total      self      wait     child     calls  name
 10.32      0.001     0.000     0.001     0.000        1   IO#readpartial 
  2.96      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  1.65      0.001     0.000     0.000     0.001        1   Session::AbstractSession#_initialize 
  1.21      0.000     0.000     0.000     0.000        3   Module#=== 
  1.10      0.000     0.000     0.000     0.000        3   IO#closed? 

* indicates recursively called methods
Thread ID: 70350256208540
Fiber ID: 70350256425880
Total: 0.000738
Sort by: self_time

 %self      total      self      wait     child     calls  name
 15.31      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
 11.11      0.000     0.000     0.000     0.000        1   Kernel#sleep 
 10.84      0.001     0.000     0.000     0.001        1   Session::AbstractSession#_initialize 
  8.13      0.000     0.000     0.000     0.000        1   IO#readpartial 
  4.47      0.000     0.000     0.000     0.000        3   Module#=== 
  4.20      0.000     0.000     0.000     0.000        3   IO#closed? 
  4.07      0.000     0.000     0.000     0.000        1   Regexp#match 
  3.39      0.000     0.000     0.000     0.000        1   Proc#call 
  2.03      0.000     0.000     0.000     0.000        1   Kernel#puts 
  2.03      0.000     0.000     0.000     0.000        2   IO#write 
  1.49      0.000     0.000     0.000     0.000        1   IO#puts 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> insert_mongodb
Thread ID: 70350252976960
Fiber ID: 70350256463120
Total: 0.001185
Sort by: self_time

 %self      total      self      wait     child     calls  name
  3.12      0.000     0.000     0.000     0.000        6   Moped::Threaded#stack 
  3.04      0.000     0.000     0.000     0.000        4   Moped::BSON::Extensions::String#__bson_dump__ 
  2.87      0.000     0.000     0.000     0.000        1   String#gsub 
  2.62      0.001     0.000     0.000     0.001        1   MyServer#handle_request 
  2.19      0.000     0.000     0.000     0.000       12   Array#pack 
  2.19      0.000     0.000     0.000     0.000        9   Moped::BSON::Extensions::String#to_utf8_binary 
  2.03      0.000     0.000     0.000     0.000        1   Time#to_s 
  1.77      0.000     0.000     0.000     0.000        1   IO#write 
  1.77      0.000     0.000     0.000     0.000        5   Moped::BSON::Extensions::String#to_bson_cstring 
  1.69      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_primary 
  1.60      0.000     0.000     0.000     0.000        1   Moped::Cluster#nodes 
  1.52      0.000     0.000     0.000     0.000        5  *Array#each 
  1.52      0.000     0.000     0.000     0.000        9   String#encode 
  1.52      0.000     0.000     0.000     0.000        2   <Module::Kernel>#select 
  1.43      0.000     0.000     0.000     0.000        4   Class#new 
  1.35      0.000     0.000     0.000     0.000        1   Hash#each 
  1.35      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize 
  1.27      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Hash#__bson_dump__ 
  1.27      0.000     0.000     0.000     0.000       11   String#force_encoding 
  1.18      0.000     0.000     0.000     0.000        1   <Class::CGI>#unescape 
  1.18      0.000     0.000     0.000     0.000        6   <Class::Thread>#current 
  1.18      0.001     0.000     0.000     0.000        1   Moped::Node#ensure_connected 
  1.10      0.001     0.000     0.000     0.001        1   Moped::Session::Context#with_node 
  1.10      0.000     0.000     0.000     0.000        1   Moped::Session#initialize_copy 
  1.01      0.000     0.000     0.000     0.000        2   Moped::Threaded#executing? 
  1.01      0.000     0.000     0.000     0.000        2   Moped::Threaded#begin 
  1.01      0.001     0.000     0.000     0.001        1   Moped::Node#logging 
  1.01      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#serialize_length 
  1.01      0.001     0.000     0.000     0.001        1   Moped::Session#with 
  0.93      0.000     0.000     0.000     0.000        8   String#bytesize 
  0.93      0.001     0.000     0.000     0.001        1   Moped::Cluster#with_primary 
  0.93      0.000     0.000     0.000     0.000        6   Symbol#to_s 
  0.84      0.000     0.000     0.000     0.000        6   Thread#[] 
  0.84      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_full_collection_name 
  0.84      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#handle_socket_errors 
  0.84      0.000     0.000     0.000     0.000        1   String#tr 
  0.84      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh 
  0.84      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#initialize 
  0.76      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#write 
  0.76      0.000     0.000     0.000     0.000        4   <Class::BasicObject>#allocate 
  0.76      0.001     0.000     0.000     0.001        1   Moped::Collection#insert 
  0.76      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Integer#__bson_dump__ 
  0.76      0.000     0.000     0.000     0.000        1   Moped::Connection#with_connection 
  0.76      0.000     0.000     0.000     0.000        1   Array#zip 
  0.76      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_op_code 
  0.76      0.001     0.000     0.000     0.001        1   Moped::Node#flush 
  0.68      0.000     0.000     0.000     0.000        1   Moped::Node#connected? 
  0.68      0.000     0.000     0.000     0.000        2   Moped::Node#down? 
  0.68      0.000     0.000     0.000     0.000        4   Fixnum#* 
  0.68      0.000     0.000     0.000     0.000        2   Array#map 
  0.68      0.000     0.000     0.000     0.000        5   String#include? 
  0.59      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#alive? 
  0.59      0.001     0.000     0.000     0.001        1   Moped::Session::Context#insert 
  0.59      0.000     0.000     0.000     0.000        1   Enumerable#find 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Collection#initialize 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Database#[] 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Session#safety 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Logging#logger 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Session#[] 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_request_id 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Cluster#member? 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_interval 
  0.59      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#length 
  0.59      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Connection#write 
  0.59      0.000     0.000     0.000     0.000        1   <Class::Moped::BSON::Document>#serialize 
  0.59      0.000     0.000     0.000     0.000        1   Array#reject 
  0.51      0.000     0.000     0.000     0.000        1   Moped::Session::Context#consistency 
  0.51      0.000     0.000     0.000     0.000        3   Hash#[]= 
  0.51      0.000     0.000     0.000     0.000        1   Thread#[]= 
  0.51      0.000     0.000     0.000     0.000        1   Moped::Session#current_database 
  0.51      0.000     0.000     0.000     0.000        2  *Kernel#initialize_dup 
  0.51      0.001     0.000     0.000     0.001        1   Moped::Node#process 
  0.51      0.000     0.000     0.000     0.000        3   Fixnum#<=> 
  0.51      0.000     0.000     0.000     0.000        1   Comparable#< 
  0.51      0.001     0.000     0.000     0.001        1   Moped::Node#insert 
  0.51      0.000     0.000     0.000     0.000        2  *Kernel#dup 
  0.51      0.000     0.000     0.000     0.000        1   Moped::Cluster#down_interval 
  0.51      0.000     0.000     0.000     0.000        1   Moped::Cluster#max_retries 
  0.51      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.51      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_response_to 
  0.51      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#response_to 
  0.42      0.000     0.000     0.000     0.000        1   Hash#initialize_copy 
  0.42      0.000     0.000     0.000     0.000        2   Array#pop 
  0.42      0.000     0.000     0.000     0.000        1   Integer#round 
  0.42      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Object#__safe_options__ 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#request_id 
  0.42      0.000     0.000     0.000     0.000        1   Enumerable#partition 
  0.42      0.000     0.000     0.000     0.000        1   Array#include? 
  0.42      0.000     0.000     0.000     0.000        1   Logger#debug? 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Node#apply_auth 
  0.42      0.000     0.000     0.000     0.000        1   Hash#== 
  0.42      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags 
  0.42      0.000     0.000     0.000     0.000        2   Time#- 
  0.42      0.000     0.000     0.000     0.000        2   Fixnum#- 
  0.42      0.000     0.000     0.000     0.000        3   Moped::Node#connection 
  0.42      0.000     0.000     0.000     0.000        1   Array#to_a 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Session::Context#cluster 
  0.42      0.000     0.000     0.000     0.000        1   Kernel#is_a? 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Session#consistency 
  0.42      0.000     0.000     0.000     0.000        1   Kernel#remove_instance_variable 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Node#auth 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Connection#receive_replies 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_documents 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Node#needs_refresh? 
  0.34      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.34      0.000     0.000     0.000     0.000        2   Array#push 
  0.34      0.000     0.000     0.000     0.000        1   Array#clear 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Session::Context#initialize 
  0.34      0.000     0.000     0.000     0.000        1   Symbol#== 
  0.34      0.000     0.000     0.000     0.000        2   Moped::Threaded#end 
  0.34      0.000     0.000     0.000     0.000        1   Array#transpose 
  0.34      0.000     0.000     0.000     0.000        1   Hash#update 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Protocol::Message#receive_replies 
  0.34      0.000     0.000     0.000     0.000        2   String#[]= 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Session#safe? 
  0.34      0.000     0.000     0.000     0.000        1   Symbol#to_proc 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_flags 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Session::Context#safe? 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#check_if_alive! 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags_as_int 
  0.25      0.000     0.000     0.000     0.000        2   Kernel#nil? 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Node#arbiter? 
  0.25      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  0.25      0.000     0.000     0.000     0.000        3   Array#empty? 
  0.25      0.000     0.000     0.000     0.000        1   String#valid_encoding? 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Node#primary? 
  0.17      0.000     0.000     0.000     0.000        2   Bignum#<=> 
  0.17      0.000     0.000     0.000     0.000        1   Moped::Connection#connected? 
  0.17      0.000     0.000     0.000     0.000        1   Time#<=> 
  0.17      0.000     0.000     0.000     0.000        1   Array#concat 
  0.17      0.000     0.000     0.000     0.000        1   Moped::Cluster#auth 
  0.08      0.000     0.000     0.000     0.000        1   Array#last 
  0.08      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#op_code 
  0.08      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> execute
Thread ID: 70350252976960
Fiber ID: 70350256463120
Total: 0.000384
Sort by: self_time

 %self      total      self      wait     child     calls  name
 19.79      0.000     0.000     0.000     0.000        1   Session::Command#initialize 
  8.85      0.000     0.000     0.000     0.000        7   IO#write 
  6.51      0.000     0.000     0.000     0.000        3  *Kernel#inspect 
  5.47      0.000     0.000     0.000     0.000        1   TerminalUser#execute 
  4.43      0.000     0.000     0.000     0.000        1   Session::AbstractSession#execute 
  4.17      0.000     0.000     0.000     0.000        5   String#% 
  3.65      0.000     0.000     0.000     0.000        3   IO#puts 
  3.39      0.000     0.000     0.000     0.000        1   Session::Sh#execute 
  2.60      0.000     0.000     0.000     0.000        1   Hash#inspect 
  2.60      0.000     0.000     0.000     0.000        3   Kernel#puts 
  2.60      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  2.08      0.000     0.000     0.000     0.000        1   Kernel#rand 
  2.08      0.000     0.000     0.000     0.000        2   String#inspect 
  1.82      0.000     0.000     0.000     0.000        6   NilClass#inspect 
  1.82      0.000     0.000     0.000     0.000        3   IO#inspect 
  1.82      0.000     0.000     0.000     0.000        1   Symbol#inspect 
  1.82      0.000     0.000     0.000     0.000        4   <Class::Regexp>#escape 
  1.82      0.000     0.000     0.000     0.000        1   Array#inspect 
  1.82      0.000     0.000     0.000     0.000        1   Thread#inspect 
  1.82      0.000     0.000     0.000     0.000        1   <Class::Session::Command>#cmdno= 
  1.56      0.000     0.000     0.000     0.000        2   <Class::Session::Command>#cmdno 
  1.56      0.000     0.000     0.000     0.000        1   Class#new 
  1.56      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  1.30      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  1.30      0.000     0.000     0.000     0.000        1   Fixnum#* 
  1.30      0.000     0.000     0.000     0.000        1   Proc#to_s 
  1.30      0.000     0.000     0.000     0.000        1   IO#flush 
  1.04      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  1.04      0.000     0.000     0.000     0.000        1   IO#printf 
  1.04      0.000     0.000     0.000     0.000        3   Module#=== 
  0.78      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.78      0.000     0.000     0.000     0.000        2   Kernel#class 
  0.78      0.000     0.000     0.000     0.000        3   IO#closed? 
  0.78      0.000     0.000     0.000     0.000        1   Time#usec 
  0.52      0.000     0.000     0.000     0.000        2   String#to_s 
  0.26      0.000     0.000     0.000     0.000        1   Kernel#respond_to_missing? 
  0.26      0.000     0.000     0.000     0.000        1   Fixnum#to_s 
  0.26      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.26      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> block_for_output_to_come
Thread ID: 70350252976960
Fiber ID: 70350256463120
Total: 0.000984
Sort by: self_time

 %self      total      self      wait     child     calls  name
 11.48      0.001     0.000     0.001     0.000        1   Kernel#sleep 
  9.55      0.001     0.000     0.000     0.001        1   TerminalUser#block_for_output_to_come 
  6.71      0.000     0.000     0.000     0.000        2   IO#write 
  6.30      0.000     0.000     0.000     0.000        1   IO#puts 
  6.00      0.000     0.000     0.000     0.000        1   Kernel#puts 
  0.41      0.000     0.000     0.000     0.000        1   StringIO#read 

* indicates recursively called methods
Thread ID: 70350253144280
Fiber ID: 70350256172120
Total: 0.000800
Sort by: self_time

 %self      total      self      wait     child     calls  name
 16.63      0.001     0.000     0.000     0.001        1   Session::AbstractSession#_initialize 
 15.00      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
 11.75      0.000     0.000     0.000     0.000        1   IO#readpartial 
  6.12      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  3.75      0.000     0.000     0.000     0.000        1   Proc#call 
  3.37      0.000     0.000     0.000     0.000        1   Regexp#match 
  3.12      0.000     0.000     0.000     0.000        3   IO#closed? 
  2.37      0.000     0.000     0.000     0.000        3   Module#=== 
  1.75      0.000     0.000     0.000     0.000        1   Kernel#puts 
  1.63      0.000     0.000     0.000     0.000        2   IO#write 
  1.50      0.000     0.000     0.000     0.000        1   IO#puts 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> initialize-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198582564660
Total: 0.000323
Sort by: self_time

 %self      total      self      wait     child     calls  name
 34.06      0.000     0.000     0.000     0.000        1   MyServer#initialize 
 25.08      0.000     0.000     0.000     0.000        1   TCPServer#initialize 
  6.50      0.000     0.000     0.000     0.000        1   Kernel#method 
  3.72      0.000     0.000     0.000     0.000        1   Celluloid::IO::Mailbox#<< 
  3.72      0.000     0.000     0.000     0.000        1   Reel::Server#initialize 
  3.10      0.000     0.000     0.000     0.000        3   Class#new 
  2.17      0.000     0.000     0.000     0.000        1   Celluloid#async 
  2.17      0.000     0.000     0.000     0.000        1   Celluloid::AsyncProxy#method_missing 
  1.86      0.000     0.000     0.000     0.000        1   <Class::Celluloid::Actor>#async 
  1.86      0.000     0.000     0.000     0.000        1   Celluloid::IO::TCPServer#listen 
  1.86      0.000     0.000     0.000     0.000        1   Celluloid::IO::TCPServer#initialize 
  1.55      0.000     0.000     0.000     0.000        1   TCPServer#listen 
  1.55      0.000     0.000     0.000     0.000        1   Method#to_proc 
  1.55      0.000     0.000     0.000     0.000        1   <Class::IO>#new 
  1.55      0.000     0.000     0.000     0.000        3   <Class::Thread>#current 
  1.24      0.000     0.000     0.000     0.000        2   <Class::BasicObject>#allocate 
  1.24      0.000     0.000     0.000     0.000        1   Celluloid::ActorProxy#async 
  1.24      0.000     0.000     0.000     0.000        3   Thread#[] 
  0.93      0.000     0.000     0.000     0.000        1   Celluloid::Call#initialize 
  0.62      0.000     0.000     0.000     0.000        1   Kernel#lambda 
  0.62      0.000     0.000     0.000     0.000        1   Kernel#is_a? 
  0.62      0.000     0.000     0.000     0.000        1   Hash#initialize 
  0.31      0.000     0.000     0.000     0.000        1   <Class::IO>#allocate 
  0.31      0.000     0.000     0.000     0.000        1   Mutex#lock 
  0.31      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  0.31      0.000     0.000     0.000     0.000        1   Mutex#unlock 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> initialize-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198582728100
Total: 0.002155
Sort by: self_time

 %self      total      self      wait     child     calls  name
 64.32      0.001     0.001     0.000     0.000        1   <Module::PTY>#spawn 
  6.73      0.002     0.000     0.000     0.002        1   Session::AbstractSession#initialize 
  5.06      0.002     0.000     0.000     0.002        1   TerminalUser#initialize 
  2.92      0.000     0.000     0.000     0.000        5   Session::AbstractSession#hasopt 
  2.60      0.000     0.000     0.000     0.000        1   Session::AbstractSession#_initialize 
  2.27      0.002     0.000     0.000     0.002        4   Class#new 
  1.48      0.001     0.000     0.000     0.001        1   Session::AbstractSession#pty_open 
  1.48      0.000     0.000     0.000     0.000        2   StringIO#initialize 
  1.39      0.000     0.000     0.000     0.000        1   Thread#initialize 
  1.39      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  1.25      0.000     0.000     0.000     0.000        2   <Class::StringIO>#allocate 
  1.11      0.000     0.000     0.000     0.000        2   Session::AbstractSession#getopt 
  1.11      0.000     0.000     0.000     0.000        1   <Class::Thread>#new 
  1.02      0.000     0.000     0.000     0.000       21   Hash#has_key? 
  1.02      0.000     0.000     0.000     0.000        1   Kernel#lambda 
  0.84      0.000     0.000     0.000     0.000        7   String#intern 
  0.70      0.000     0.000     0.000     0.000        2   BasicObject#initialize 
  0.46      0.000     0.000     0.000     0.000        8   NilClass#nil? 
  0.37      0.000     0.000     0.000     0.000        1   <Class::Mutex>#allocate 
  0.32      0.000     0.000     0.000     0.000        1   <Class::Session::AbstractSession>#default_prog 
  0.32      0.000     0.000     0.000     0.000        1   Hash#update 
  0.32      0.000     0.000     0.000     0.000        1   Mutex#initialize 
  0.28      0.000     0.000     0.000     0.000        5   Kernel#class 
  0.28      0.000     0.000     0.000     0.000        1   Array#each 
  0.23      0.000     0.000     0.000     0.000        2   <Class::IO>#allocate 
  0.23      0.000     0.000     0.000     0.000        1   Session::AbstractSession#hashify 
  0.19      0.000     0.000     0.000     0.000        1   Enumerable#inject 
  0.19      0.000     0.000     0.000     0.000        1   <Class::Thread>#current 
  0.09      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> insert_mongodb-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198582728100
Total: 0.004305
Sort by: self_time

 %self      total      self      wait     child     calls  name
  2.30      0.000     0.000     0.000     0.000        7   <Module::Kernel>#select 
  2.18      0.001     0.000     0.000     0.001        3   Moped::Connection#with_connection 
  2.07      0.000     0.000     0.000     0.000       10   Moped::Threaded#stack 
  1.72      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Hash::ClassMethods#__bson_load__ 
  1.72      0.001     0.000     0.000     0.000        1   Timeout#timeout 
  1.72      0.000     0.000     0.000     0.000       23   Array#pack 
  1.67      0.000     0.000     0.000     0.000        1   TCPSocket#initialize 
  1.60      0.000     0.000     0.000     0.000       14  *Class#new 
  1.53      0.000     0.000     0.000     0.000        2   IO#write 
  1.49      0.000     0.000     0.000     0.000        4   Moped::BSON::Extensions::String#__bson_dump__ 
  1.44      0.003     0.000     0.000     0.003        2   Moped::Node#ensure_connected 
  1.37      0.000     0.000     0.000     0.000        1   Time#to_s 
  1.35      0.000     0.000     0.000     0.000        3   BasicSocket#setsockopt 
  1.18      0.000     0.000     0.000     0.000       10   Moped::BSON::Extensions::String#to_utf8_binary 
  1.16      0.000     0.000     0.000     0.000        7   Moped::Sockets::Connectable#alive? 
  1.16      0.003     0.000     0.000     0.003        6  *Array#each 
  1.02      0.000     0.000     0.000     0.000        2   Moped::BSON::Extensions::Hash#__bson_dump__ 
  1.02      0.000     0.000     0.000     0.000        1   <Class::Thread>#start 
  1.02      0.000     0.000     0.000     0.000        6   Moped::BSON::Extensions::String#to_bson_cstring 
  1.00      0.000     0.000     0.000     0.000        7   Moped::Node#connection 
  1.00      0.004     0.000     0.000     0.004        1   MyServer#handle_request 
  1.00      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize 
  1.00      0.000     0.000     0.000     0.000        5   Moped::Sockets::Connectable#handle_socket_errors 
  0.93      0.000     0.000     0.000     0.000        2   Hash#each 
  0.91      0.003     0.000     0.000     0.003        1   Moped::Node#refresh 
  0.86      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_primary 
  0.84      0.000     0.000     0.000     0.000       10   String#encode 
  0.79      0.000     0.000     0.000     0.000        2   Moped::BSON::Extensions::Integer#__bson_dump__ 
  0.79      0.003     0.000     0.000     0.003        2   Moped::Node#logging 
  0.74      0.000     0.000     0.000     0.000        9   Hash#[]= 
  0.74      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#initialize 
  0.74      0.001     0.000     0.000     0.001        5   Array#map 
  0.74      0.000     0.000     0.000     0.000        5   StringIO#read 
  0.74      0.000     0.000     0.000     0.000        5   Moped::BSON::Extensions::String#from_utf8_binary 
  0.70      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize 
  0.63      0.000     0.000     0.000     0.000        4   Moped::Sockets::Connectable#check_if_alive! 
  0.63      0.003     0.000     0.000     0.003        2   Moped::Node#process 
  0.63      0.000     0.000     0.000     0.000        4   Moped::Threaded#executing? 
  0.60      0.003     0.000     0.000     0.003        1   Moped::Cluster#nodes 
  0.60      0.000     0.000     0.000     0.000       12   Hash#[] 
  0.58      0.001     0.000     0.000     0.001        2   Moped::Connection#write 
  0.58      0.000     0.000     0.000     0.000       11   <Class::BasicObject>#allocate 
  0.58      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#flags_as_int 
  0.56      0.004     0.000     0.000     0.004        1   Moped::Cluster#with_primary 
  0.56      0.000     0.000     0.000     0.000        1   Moped::Node#generate_peers 
  0.56      0.000     0.000     0.000     0.000       15   String#force_encoding 
  0.56      0.000     0.000     0.000     0.000        1   Logger#initialize 
  0.51      0.003     0.000     0.000     0.003        2   Moped::Node#flush 
  0.51      0.000     0.000     0.000     0.000        2   Array#zip 
  0.51      0.000     0.000     0.000     0.000       10   Thread#[] 
  0.49      0.000     0.000     0.000     0.000        3   Moped::Threaded#begin 
  0.49      0.000     0.000     0.000     0.000        2   Moped::Protocol::Query#serialize_length 
  0.49      0.000     0.000     0.000     0.000        2   Moped::Logging#logger 
  0.49      0.000     0.000     0.000     0.000       11   <Class::Thread>#current 
  0.49      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#initialize 
  0.49      0.000     0.000     0.000     0.000        7   IO::readable#readbyte 
  0.46      0.003     0.000     0.000     0.003        1   Moped::Cluster#refresh 
  0.46      0.000     0.000     0.000     0.000        5   String#unpack 
  0.46      0.000     0.000     0.000     0.000        6   String#include? 
  0.46      0.004     0.000     0.000     0.004        1   Moped::Collection#insert 
  0.46      0.000     0.000     0.000     0.000       12   String#bytesize 
  0.44      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#command_failure? 
  0.44      0.004     0.000     0.000     0.004        1   Moped::Session::Context#with_node 
  0.44      0.000     0.000     0.000     0.000        1   IO#eof? 
  0.44      0.004     0.000     0.000     0.004        1   Moped::Session#with 
  0.44      0.000     0.000     0.000     0.000        3   Moped::Threaded#end 
  0.44      0.000     0.000     0.000     0.000        1   Array#reject 
  0.44      0.000     0.000     0.000     0.000        2   Moped::Connection#read_data 
  0.44      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#write 
  0.42      0.000     0.000     0.000     0.000        1   Logger::LogDevice#initialize 
  0.42      0.000     0.000     0.000     0.000        2   Integer#times 
  0.42      0.000     0.000     0.000     0.000        7   StringIO#getbyte 
  0.42      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#serialize_length 
  0.42      0.001     0.000     0.000     0.001        2   Moped::Connection#receive_replies 
  0.42      0.000     0.000     0.000     0.000        5   StringIO#gets 
  0.39      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Time::ClassMethods#__bson_load__ 
  0.39      0.000     0.000     0.000     0.000        1   Moped::Sockets::TCP#initialize 
  0.39      0.000     0.000     0.000     0.000        5   Fixnum#* 
  0.39      0.000     0.000     0.000     0.000        1   Proc#[] 
  0.39      0.001     0.000     0.000     0.001        1   Moped::Connection#connect 
  0.39      0.000     0.000     0.000     0.000        4   String#[]= 
  0.37      0.000     0.000     0.000     0.000        8   Array#include? 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Session#initialize_copy 
  0.37      0.000     0.000     0.000     0.000        1   Time#utc 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Protocol::Command#initialize 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_full_collection_name 
  0.35      0.003     0.000     0.000     0.003        1   Moped::Node#command 
  0.35      0.000     0.000     0.000     0.000        2   Moped::Node#connected? 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_response_to 
  0.33      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#flags_from_int 
  0.33      0.000     0.000     0.000     0.000        7   Symbol#to_s 
  0.33      0.000     0.000     0.000     0.000        6   Array#empty? 
  0.33      0.000     0.000     0.000     0.000        2   Moped::Protocol::Query#length 
  0.33      0.000     0.000     0.000     0.000        1   MonitorMixin#mon_initialize 
  0.33      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#error_message 
  0.33      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#flags= 
  0.33      0.000     0.000     0.000     0.000        5   String#encode! 
  0.33      0.000     0.000     0.000     0.000        2   Moped::Node#down? 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_flags 
  0.30      0.000     0.000     0.000     0.000        1   Moped::Connection#initialize 
  0.30      0.000     0.000     0.000     0.000        2   <Class::Moped::BSON::Document>#serialize 
  0.30      0.000     0.000     0.000     0.000        2   IO#read 
  0.30      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Float::ClassMethods#__bson_load__ 
  0.30      0.000     0.000     0.000     0.000        1   MonitorMixin#initialize 
  0.30      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#read 
  0.28      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#length 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_full_collection_name 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Cluster#down_interval 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#limit 
  0.28      0.000     0.000     0.000     0.000        2   Hash#initialize_copy 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_peers 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_skip 
  0.28      0.001     0.000     0.000     0.001        1   Moped::Protocol::Query#receive_replies 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Logging#default_logger 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_limit 
  0.28      0.000     0.000     0.000     0.000        2   Moped::BSON::Extensions::Integer::ClassMethods#__bson_load__ 
  0.26      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Boolean::ClassMethods#__bson_load__ 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_flags 
  0.26      0.001     0.000     0.000     0.001        1   Moped::Sockets::Connectable::ClassMethods#connect 
  0.26      0.004     0.000     0.000     0.004        1   Moped::Session::Context#insert 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Node#apply_auth 
  0.26      0.000     0.000     0.000     0.000        1   <Class::Time>#at 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Session#[] 
  0.26      0.001     0.000     0.000     0.001        1   Moped::Node#connect 
  0.26      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags_as_int 
  0.23      0.000     0.000     0.000     0.000        2   Moped::Connection#connected? 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Node#resolve_address 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_request_id 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_op_code 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Cluster#max_retries 
  0.23      0.000     0.000     0.000     0.000        2   Moped::Protocol::Reply#count 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Node#hash 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_interval 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_selector 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_request_id 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Collection#initialize 
  0.23      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_response_to 
  0.21      0.000     0.000     0.000     0.000        3   Kernel#nil? 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Database#[] 
  0.21      0.000     0.000     0.000     0.000        1   Hash#merge 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Session::Context#consistency 
  0.21      0.000     0.000     0.000     0.000        2   Logger#debug? 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_documents 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#flags 
  0.21      0.000     0.000     0.000     0.000        3   <Class::Hash>#allocate 
  0.21      0.000     0.000     0.000     0.000        1   <Class::IO>#new 
  0.21      0.000     0.000     0.000     0.000        1   Symbol#to_proc 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Node#needs_refresh? 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Cluster#member? 
  0.19      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#serialize_fields 
  0.19      0.000     0.000     0.000     0.000        1   Moped::Session#current_database 
  0.19      0.000     0.000     0.000     0.000        1   Moped::Cluster#auth 
  0.19      0.000     0.000     0.000     0.000        1   IO#set_encoding 
  0.19      0.000     0.000     0.000     0.000        1   Thread#kill 
  0.19      0.000     0.000     0.000     0.000        2  *Kernel#dup 
  0.19      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#skip 
  0.19      0.000     0.000     0.000     0.000        1   Enumerable#find 
  0.19      0.000     0.000     0.000     0.000        1   Kernel#proc 
  0.19      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_op_code 
  0.19      0.000     0.000     0.000     0.000        4   Fixnum#divmod 
  0.19      0.000     0.000     0.000     0.000        3   Fixnum#+ 
  0.19      0.000     0.000     0.000     0.000        1   Moped::Session#safety 
  0.19      0.000     0.000     0.000     0.000        2   Array#transpose 
  0.19      0.000     0.000     0.000     0.000        3   Array#push 
  0.19      0.000     0.000     0.000     0.000        1   Moped::Session#consistency 
  0.19      0.000     0.000     0.000     0.000        4   Fixnum#<=> 
  0.16      0.000     0.000     0.000     0.000        1   Class#initialize 
  0.16      0.000     0.000     0.000     0.000        1   Moped::Session#safe? 
  0.16      0.000     0.000     0.000     0.000        3   Array#pop 
  0.16      0.000     0.000     0.000     0.000        1   Thread#join 
  0.16      0.001     0.000     0.000     0.001        1   Moped::Node#insert 
  0.16      0.000     0.000     0.000     0.000        1   StringIO#initialize 
  0.16      0.000     0.000     0.000     0.000        2   Time#- 
  0.16      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags 
  0.16      0.000     0.000     0.000     0.000        2   Time#initialize 
  0.16      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  0.16      0.000     0.000     0.000     0.000        1   Moped::Protocol::Reply#length 
  0.16      0.000     0.000     0.000     0.000        2   Kernel#is_a? 
  0.16      0.000     0.000     0.000     0.000        1   BasicObject#!= 
  0.16      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#request_id 
  0.16      0.000     0.000     0.000     0.000        1   Moped::Session::Context#safe? 
  0.16      0.000     0.000     0.000     0.000        5   String#chop! 
  0.16      0.000     0.000     0.000     0.000        3   Fixnum#& 
  0.14      0.000     0.000     0.000     0.000        1   Hash#initialize 
  0.14      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#request_id 
  0.14      0.000     0.000     0.000     0.000        1   <Class::Moped::BSON::Document>#deserialize 
  0.14      0.000     0.000     0.000     0.000        1   Enumerable#partition 
  0.14      0.000     0.000     0.000     0.000        1   Moped::Logging#rails_logger 
  0.14      0.000     0.000     0.000     0.000        1   Moped::Node#arbiter? 
  0.14      0.000     0.000     0.000     0.000        1   Class#allocate 
  0.14      0.000     0.000     0.000     0.000        2   Kernel#respond_to? 
  0.14      0.000     0.000     0.000     0.000        3  *Kernel#initialize_dup 
  0.14      0.000     0.000     0.000     0.000        1   Enumerable#map 
  0.14      0.000     0.000     0.000     0.000        1   <Class::Class>#allocate 
  0.14      0.000     0.000     0.000     0.000        2   <Class::Time>#allocate 
  0.14      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#op_code 
  0.14      0.000     0.000     0.000     0.000        2   Array#clear 
  0.14      0.000     0.000     0.000     0.000        1   Fixnum#== 
  0.12      0.000     0.000     0.000     0.000        1   Float#== 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Session::Context#initialize 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#response_to 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#op_code 
  0.12      0.000     0.000     0.000     0.000        1   Hash#== 
  0.12      0.000     0.000     0.000     0.000        1   Moped::Node#auth 
  0.12      0.000     0.000     0.000     0.000        1   Array#concat 
  0.12      0.000     0.000     0.000     0.000        2   Fixnum#- 
  0.12      0.000     0.000     0.000     0.000        2   Array#last 
  0.09      0.000     0.000     0.000     0.000        1   Thread#[]= 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Session::Context#cluster 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Protocol::Query#response_to 
  0.09      0.001     0.000     0.000     0.001        1   Moped::Connection#read 
  0.09      0.000     0.000     0.000     0.000        1   Hash#update 
  0.09      0.000     0.000     0.000     0.000        1   Integer#round 
  0.09      0.000     0.000     0.000     0.000        1   Mutex#initialize 
  0.09      0.000     0.000     0.000     0.000        1   Rational#/ 
  0.09      0.000     0.000     0.000     0.000        1   String#hash 
  0.09      0.000     0.000     0.000     0.000        2   BasicObject#initialize 
  0.09      0.000     0.000     0.000     0.000        1   <Class::StringIO>#allocate 
  0.09      0.000     0.000     0.000     0.000        1   Logger::Formatter#initialize 
  0.09      0.000     0.000     0.000     0.000        1   Moped::Node#primary? 
  0.09      0.000     0.000     0.000     0.000        1   Fixnum#zero? 
  0.09      0.000     0.000     0.000     0.000        1   <Class::Mutex>#allocate 
  0.09      0.000     0.000     0.000     0.000        1   Kernel#remove_instance_variable 
  0.07      0.000     0.000     0.000     0.000        1   BasicObject#== 
  0.07      0.000     0.000     0.000     0.000        1   Moped::Protocol::Message#receive_replies 
  0.07      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.07      0.000     0.000     0.000     0.000        1   <Class::IO>#allocate 
  0.07      0.000     0.000     0.000     0.000        1   Numeric#quo 
  0.07      0.000     0.000     0.000     0.000        1   NilClass#nil? 
  0.07      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Object#__safe_options__ 
  0.07      0.000     0.000     0.000     0.000        1   Array#first 
  0.07      0.000     0.000     0.000     0.000        1   Enumerator#each 
  0.07      0.000     0.000     0.000     0.000        2   Bignum#<=> 
  0.05      0.000     0.000     0.000     0.000        1   Array#to_a 
  0.05      0.000     0.000     0.000     0.000        1   Array#uniq 
  0.05      0.000     0.000     0.000     0.000        1   Symbol#== 
  0.05      0.000     0.000     0.000     0.000        1   Class#inherited 

* indicates recursively called methods
Thread ID: 70198459994380
Fiber ID: 70198459994220
Total: 0.003048
Sort by: self_time

 %self      total      self      wait     child     calls  name
  3.87      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  3.51      0.003     0.000     0.003     0.000        1   Timeout#timeout 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> execute-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198582728100
Total: 0.000516
Sort by: self_time

 %self      total      self      wait     child     calls  name
 24.81      0.000     0.000     0.000     0.000        1   Session::Command#initialize 
 11.05      0.001     0.000     0.000     0.000        1   TerminalUser#execute 
  7.75      0.000     0.000     0.000     0.000        3  *Kernel#inspect 
  5.81      0.000     0.000     0.000     0.000        5   String#% 
  5.43      0.000     0.000     0.000     0.000        7   IO#write 
  5.04      0.000     0.000     0.000     0.000        1   Session::AbstractSession#execute 
  3.29      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  3.10      0.000     0.000     0.000     0.000        1   Kernel#rand 
  2.52      0.000     0.000     0.000     0.000        4   <Class::Regexp>#escape 
  1.94      0.000     0.000     0.000     0.000        1   Session::Sh#execute 
  1.74      0.000     0.000     0.000     0.000        2   <Class::Session::Command>#cmdno 
  1.55      0.000     0.000     0.000     0.000        3   IO#puts 
  1.55      0.000     0.000     0.000     0.000        1   Hash#inspect 
  1.55      0.000     0.000     0.000     0.000        1   Class#new 
  1.36      0.000     0.000     0.000     0.000        3   Kernel#puts 
  1.36      0.000     0.000     0.000     0.000        1   Time#initialize 
  1.36      0.000     0.000     0.000     0.000        1   Time#usec 
  1.16      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  1.16      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  1.16      0.000     0.000     0.000     0.000        1   IO#printf 
  0.97      0.000     0.000     0.000     0.000        3   IO#inspect 
  0.97      0.000     0.000     0.000     0.000        1   Proc#to_s 
  0.97      0.000     0.000     0.000     0.000        1   <Class::Session::Command>#cmdno= 
  0.97      0.000     0.000     0.000     0.000        1   Array#inspect 
  0.97      0.000     0.000     0.000     0.000        6   NilClass#inspect 
  0.78      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.78      0.000     0.000     0.000     0.000        2   String#inspect 
  0.78      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.78      0.000     0.000     0.000     0.000        1   Symbol#inspect 
  0.78      0.000     0.000     0.000     0.000        2   Kernel#class 
  0.78      0.000     0.000     0.000     0.000        1   Fixnum#to_s 
  0.78      0.000     0.000     0.000     0.000        1   IO#flush 
  0.58      0.000     0.000     0.000     0.000        1   Fixnum#* 
  0.58      0.000     0.000     0.000     0.000        3   Module#=== 
  0.58      0.000     0.000     0.000     0.000        3   IO#closed? 
  0.58      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.58      0.000     0.000     0.000     0.000        2   NilClass#to_s 
  0.58      0.000     0.000     0.000     0.000        1   Thread#inspect 
  0.39      0.000     0.000     0.000     0.000        1   Kernel#respond_to_missing? 
  0.39      0.000     0.000     0.000     0.000        1   String#to_s 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> block_for_output_to_come-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198582728100
Total: 0.000808
Sort by: self_time

 %self      total      self      wait     child     calls  name
 18.69      0.001     0.000     0.000     0.000        1   Kernel#sleep 
 16.58      0.001     0.000     0.000     0.001        1   TerminalUser#block_for_output_to_come 
  7.30      0.000     0.000     0.000     0.000        1   Kernel#puts 
  3.22      0.000     0.000     0.000     0.000        1   IO#puts 
  3.09      0.000     0.000     0.000     0.000        2   IO#write 
  1.11      0.000     0.000     0.000     0.000        1   StringIO#read 

* indicates recursively called methods
Thread ID: 70198582736660
Fiber ID: 70198460366680
Total: 0.000591
Sort by: self_time

 %self      total      self      wait     child     calls  name
 16.41      0.000     0.000     0.000     0.000        1   IO#readpartial 
 12.01      0.000     0.000     0.000     0.000        1   Kernel#sleep 
 11.00      0.001     0.000     0.000     0.001        1   Session::AbstractSession#_initialize 
  6.77      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  4.57      0.000     0.000     0.000     0.000        3   IO#closed? 
  3.72      0.000     0.000     0.000     0.000        1   Regexp#match 
  2.71      0.000     0.000     0.000     0.000        3   Module#=== 
  2.37      0.000     0.000     0.000     0.000        1   Proc#call 
  1.18      0.000     0.000     0.000     0.000        1   Kernel#puts 
  1.18      0.000     0.000     0.000     0.000        1   IO#puts 
  1.02      0.000     0.000     0.000     0.000        2   IO#write 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> initialize-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460389720
Total: 0.001981
Sort by: self_time

 %self      total      self      wait     child     calls  name
 64.61      0.001     0.001     0.000     0.000        1   <Module::PTY>#spawn 
  8.38      0.002     0.000     0.000     0.002        1   TerminalUser#initialize 
  4.09      0.002     0.000     0.000     0.001        1   Session::AbstractSession#initialize 
  2.78      0.000     0.000     0.000     0.000        1   Kernel#lambda 
  2.47      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  2.22      0.000     0.000     0.000     0.000        5   Session::AbstractSession#hasopt 
  1.77      0.000     0.000     0.000     0.000        2   StringIO#initialize 
  1.56      0.000     0.000     0.000     0.000        2   <Class::StringIO>#allocate 
  1.51      0.000     0.000     0.000     0.000        2   BasicObject#initialize 
  1.51      0.002     0.000     0.000     0.002        4   Class#new 
  1.31      0.000     0.000     0.000     0.000        1   Session::AbstractSession#_initialize 
  1.16      0.000     0.000     0.000     0.000        2   Session::AbstractSession#getopt 
  1.11      0.000     0.000     0.000     0.000        1   Thread#initialize 
  1.06      0.001     0.000     0.000     0.001        1   Session::AbstractSession#pty_open 
  0.91      0.000     0.000     0.000     0.000        1   <Class::Thread>#new 
  0.81      0.000     0.000     0.000     0.000       21   Hash#has_key? 
  0.40      0.000     0.000     0.000     0.000        7   String#intern 
  0.35      0.000     0.000     0.000     0.000        8   NilClass#nil? 
  0.35      0.000     0.000     0.000     0.000        5   Kernel#class 
  0.25      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  0.20      0.000     0.000     0.000     0.000        1   Array#each 
  0.15      0.000     0.000     0.000     0.000        1   Session::AbstractSession#hashify 
  0.15      0.000     0.000     0.000     0.000        2   <Class::IO>#allocate 
  0.15      0.000     0.000     0.000     0.000        1   Hash#update 
  0.15      0.000     0.000     0.000     0.000        1   Enumerable#inject 
  0.15      0.000     0.000     0.000     0.000        1   <Class::Session::AbstractSession>#default_prog 
  0.15      0.000     0.000     0.000     0.000        1   Mutex#initialize 
  0.15      0.000     0.000     0.000     0.000        1   <Class::Mutex>#allocate 
  0.10      0.000     0.000     0.000     0.000        1   <Class::Thread>#current 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> insert_mongodb-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460389720
Total: 0.001434
Sort by: self_time

 %self      total      self      wait     child     calls  name
  3.63      0.000     0.000     0.000     0.000        4   Moped::BSON::Extensions::String#__bson_dump__ 
  3.21      0.000     0.000     0.000     0.000        9   Moped::BSON::Extensions::String#to_utf8_binary 
  3.07      0.000     0.000     0.000     0.000        1   Time#to_s 
  3.00      0.000     0.000     0.000     0.000        6   Moped::Threaded#stack 
  2.72      0.000     0.000     0.000     0.000       12   Array#pack 
  2.65      0.001     0.000     0.000     0.001        1   MyServer#handle_request 
  2.58      0.000     0.000     0.000     0.000        1   IO#write 
  2.37      0.000     0.000     0.000     0.000        1   Hash#each 
  2.23      0.000     0.000     0.000     0.000        5   Moped::BSON::Extensions::String#to_bson_cstring 
  2.09      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize 
  2.02      0.000     0.000     0.000     0.000        2   <Module::Kernel>#select 
  1.95      0.000     0.000     0.000     0.000        4   Class#new 
  1.88      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Hash#__bson_dump__ 
  1.81      0.001     0.000     0.000     0.000        5  *Array#each 
  1.81      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_connected 
  1.67      0.000     0.000     0.000     0.000        9   String#encode 
  1.60      0.000     0.000     0.000     0.000        1   Moped::Cluster#nodes 
  1.60      0.000     0.000     0.000     0.000        6   <Class::Thread>#current 
  1.32      0.001     0.000     0.000     0.001        1   Moped::Session#with 
  1.19      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_primary 
  1.19      0.001     0.000     0.000     0.001        1   Moped::Node#logging 
  1.12      0.000     0.000     0.000     0.000        9   String#force_encoding 
  1.12      0.000     0.000     0.000     0.000        6   Thread#[] 
  1.12      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#initialize 
  1.05      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#serialize_length 
  1.05      0.001     0.000     0.000     0.001        1   Moped::Session::Context#with_node 
  1.05      0.001     0.000     0.000     0.001        1   Moped::Cluster#with_primary 
  1.05      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_response_to 
  0.98      0.000     0.000     0.000     0.000        1   Moped::Session#initialize_copy 
  0.98      0.000     0.000     0.000     0.000        8   String#bytesize 
  0.91      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#length 
  0.91      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Integer#__bson_dump__ 
  0.84      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#alive? 
  0.84      0.000     0.000     0.000     0.000        2   Moped::Threaded#begin 
  0.84      0.001     0.000     0.000     0.001        1   Moped::Collection#insert 
  0.84      0.000     0.000     0.000     0.000        1   Moped::Connection#with_connection 
  0.84      0.000     0.000     0.000     0.000        1   Hash#initialize_copy 
  0.84      0.000     0.000     0.000     0.000        2   Moped::Threaded#end 
  0.84      0.000     0.000     0.000     0.000        6   Symbol#to_s 
  0.77      0.000     0.000     0.000     0.000        2   Array#map 
  0.77      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags_as_int 
  0.77      0.000     0.000     0.000     0.000        1   Array#reject 
  0.77      0.000     0.000     0.000     0.000        2   Moped::Threaded#executing? 
  0.77      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh 
  0.70      0.000     0.000     0.000     0.000        3   Moped::Node#connection 
  0.70      0.000     0.000     0.000     0.000        3   Fixnum#<=> 
  0.63      0.000     0.000     0.000     0.000        4   <Class::BasicObject>#allocate 
  0.63      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_op_code 
  0.63      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.63      0.001     0.000     0.000     0.001        1   Moped::Node#process 
  0.63      0.000     0.000     0.000     0.000        5   String#include? 
  0.63      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#handle_socket_errors 
  0.63      0.000     0.000     0.000     0.000        3   Hash#[]= 
  0.56      0.000     0.000     0.000     0.000        2   String#[]= 
  0.56      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#write 
  0.56      0.000     0.000     0.000     0.000        2   Fixnum#- 
  0.56      0.001     0.000     0.000     0.001        1   Moped::Connection#write 
  0.56      0.000     0.000     0.000     0.000        1   Moped::Node#arbiter? 
  0.56      0.000     0.000     0.000     0.000        4   Fixnum#* 
  0.56      0.000     0.000     0.000     0.000        1   Moped::Cluster#max_retries 
  0.56      0.000     0.000     0.000     0.000        1   Moped::Protocol::Message#receive_replies 
  0.56      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_request_id 
  0.49      0.000     0.000     0.000     0.000        1   Moped::Collection#initialize 
  0.49      0.000     0.000     0.000     0.000        2   Moped::Node#down? 
  0.49      0.001     0.000     0.000     0.001        1   Moped::Node#insert 
  0.49      0.000     0.000     0.000     0.000        1   Moped::Session#[] 
  0.49      0.000     0.000     0.000     0.000        2  *Kernel#dup 
  0.49      0.001     0.000     0.000     0.001        1   Moped::Node#flush 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_flags 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Connection#receive_replies 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Session#safety 
  0.42      0.001     0.000     0.000     0.001        1   Moped::Session::Context#insert 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Node#connected? 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Node#needs_refresh? 
  0.42      0.000     0.000     0.000     0.000        2   Time#- 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Session::Context#safe? 
  0.35      0.000     0.000     0.000     0.000        1   Time#<=> 
  0.35      0.000     0.000     0.000     0.000        3   Array#empty? 
  0.35      0.000     0.000     0.000     0.000        1   Array#clear 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Node#auth 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Database#[] 
  0.35      0.000     0.000     0.000     0.000        1   Array#zip 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Session::Context#consistency 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#response_to 
  0.35      0.000     0.000     0.000     0.000        2   Bignum#<=> 
  0.35      0.000     0.000     0.000     0.000        1   Integer#round 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_full_collection_name 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Logging#logger 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#check_if_alive! 
  0.35      0.000     0.000     0.000     0.000        1   Enumerable#partition 
  0.35      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.35      0.000     0.000     0.000     0.000        1   Moped::Cluster#member? 
  0.28      0.000     0.000     0.000     0.000        1   Logger#debug? 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Cluster#down_interval 
  0.28      0.000     0.000     0.000     0.000        2   Array#pop 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_interval 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session#current_database 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session#safe? 
  0.28      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Object#__safe_options__ 
  0.28      0.000     0.000     0.000     0.000        1   <Class::Moped::BSON::Document>#serialize 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session::Context#cluster 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Node#primary? 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session#consistency 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Node#apply_auth 
  0.28      0.000     0.000     0.000     0.000        1   Comparable#< 
  0.28      0.000     0.000     0.000     0.000        1   Kernel#is_a? 
  0.28      0.000     0.000     0.000     0.000        1   Symbol#to_proc 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session::Context#initialize 
  0.28      0.000     0.000     0.000     0.000        1   Kernel#remove_instance_variable 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Connection#connected? 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#request_id 
  0.28      0.000     0.000     0.000     0.000        2   Array#push 
  0.28      0.000     0.000     0.000     0.000        2  *Kernel#initialize_dup 
  0.21      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  0.21      0.000     0.000     0.000     0.000        1   Hash#update 
  0.21      0.000     0.000     0.000     0.000        1   Thread#[]= 
  0.21      0.000     0.000     0.000     0.000        1   Hash#== 
  0.21      0.000     0.000     0.000     0.000        1   Symbol#== 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Cluster#auth 
  0.21      0.000     0.000     0.000     0.000        1   Array#include? 
  0.21      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#op_code 
  0.21      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.21      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.21      0.000     0.000     0.000     0.000        1   Enumerable#find 
  0.21      0.000     0.000     0.000     0.000        1   NilClass#nil? 
  0.21      0.000     0.000     0.000     0.000        1   Kernel#nil? 
  0.21      0.000     0.000     0.000     0.000        1   Array#to_a 
  0.21      0.000     0.000     0.000     0.000        1   Array#transpose 
  0.14      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.14      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags 
  0.14      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_documents 
  0.14      0.000     0.000     0.000     0.000        1   Array#concat 
  0.14      0.000     0.000     0.000     0.000        1   Array#last 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> execute-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460389720
Total: 0.000384
Sort by: self_time

 %self      total      self      wait     child     calls  name
 19.27      0.000     0.000     0.000     0.000        1   Session::Command#initialize 
 12.76      0.000     0.000     0.000     0.000        1   TerminalUser#execute 
  7.03      0.000     0.000     0.000     0.000        3  *Kernel#inspect 
  6.77      0.000     0.000     0.000     0.000        7   IO#write 
  4.69      0.000     0.000     0.000     0.000        5   String#% 
  4.69      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  4.43      0.000     0.000     0.000     0.000        1   Session::AbstractSession#execute 
  2.60      0.000     0.000     0.000     0.000        4   <Class::Regexp>#escape 
  2.34      0.000     0.000     0.000     0.000        2   <Class::Session::Command>#cmdno 
  2.08      0.000     0.000     0.000     0.000        2   String#inspect 
  2.08      0.000     0.000     0.000     0.000        6   NilClass#inspect 
  1.82      0.000     0.000     0.000     0.000        1   Session::Sh#execute 
  1.82      0.000     0.000     0.000     0.000        1   Hash#inspect 
  1.82      0.000     0.000     0.000     0.000        3   IO#puts 
  1.56      0.000     0.000     0.000     0.000        1   IO#printf 
  1.56      0.000     0.000     0.000     0.000        1   Kernel#rand 
  1.56      0.000     0.000     0.000     0.000        3   Module#=== 
  1.56      0.000     0.000     0.000     0.000        1   <Class::Session::Command>#cmdno= 
  1.56      0.000     0.000     0.000     0.000        1   Thread#inspect 
  1.56      0.000     0.000     0.000     0.000        3   Kernel#puts 
  1.30      0.000     0.000     0.000     0.000        3   IO#inspect 
  1.04      0.000     0.000     0.000     0.000        2   Kernel#class 
  1.04      0.000     0.000     0.000     0.000        1   Array#inspect 
  1.04      0.000     0.000     0.000     0.000        1   Class#new 
  0.78      0.000     0.000     0.000     0.000        3   IO#closed? 
  0.78      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.78      0.000     0.000     0.000     0.000        1   IO#flush 
  0.78      0.000     0.000     0.000     0.000        1   Symbol#inspect 
  0.78      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.78      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.78      0.000     0.000     0.000     0.000        1   Kernel#respond_to_missing? 
  0.78      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  0.78      0.000     0.000     0.000     0.000        2   NilClass#to_s 
  0.78      0.000     0.000     0.000     0.000        1   Proc#to_s 
  0.78      0.000     0.000     0.000     0.000        1   Time#usec 
  0.52      0.000     0.000     0.000     0.000        1   Fixnum#* 
  0.52      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.52      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  0.26      0.000     0.000     0.000     0.000        1   Fixnum#to_s 
  0.26      0.000     0.000     0.000     0.000        1   String#to_s 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> block_for_output_to_come-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460389720
Total: 0.001129
Sort by: self_time

 %self      total      self      wait     child     calls  name
 16.12      0.001     0.000     0.001     0.000        1   Kernel#sleep 
  5.31      0.001     0.000     0.000     0.001        1   TerminalUser#block_for_output_to_come 
  3.63      0.000     0.000     0.000     0.000        1   Kernel#puts 
  1.51      0.000     0.000     0.000     0.000        1   IO#puts 
  1.33      0.000     0.000     0.000     0.000        2   IO#write 
  0.35      0.000     0.000     0.000     0.000        1   StringIO#read 

* indicates recursively called methods
Thread ID: 70198582736660
Fiber ID: 70198460366680
Total: 0.000907
Sort by: self_time

 %self      total      self      wait     child     calls  name
 16.87      0.001     0.000     0.001     0.000        1   IO#readpartial 
  2.43      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  1.32      0.001     0.000     0.000     0.001        1   Session::AbstractSession#_initialize 
  0.99      0.000     0.000     0.000     0.000        3   IO#closed? 
  0.77      0.000     0.000     0.000     0.000        3   Module#=== 

* indicates recursively called methods
Thread ID: 70198460403060
Fiber ID: 70198460604000
Total: 0.000657
Sort by: self_time

 %self      total      self      wait     child     calls  name
 12.79      0.001     0.000     0.000     0.001        1   Session::AbstractSession#_initialize 
 10.35      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  9.89      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  9.59      0.000     0.000     0.000     0.000        1   Regexp#match 
  7.31      0.000     0.000     0.000     0.000        1   Proc#call 
  6.70      0.000     0.000     0.000     0.000        3   Module#=== 
  6.54      0.000     0.000     0.000     0.000        1   IO#readpartial 
  5.18      0.000     0.000     0.000     0.000        3   IO#closed? 
  5.02      0.000     0.000     0.000     0.000        1   IO#puts 
  4.41      0.000     0.000     0.000     0.000        1   Kernel#puts 
  3.96      0.000     0.000     0.000     0.000        2   IO#write 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> insert_mongodb-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460641240
Total: 0.001191
Sort by: self_time

 %self      total      self      wait     child     calls  name
  3.19      0.000     0.000     0.000     0.000        6   Moped::Threaded#stack 
  2.85      0.000     0.000     0.000     0.000        4   Moped::BSON::Extensions::String#__bson_dump__ 
  2.69      0.001     0.000     0.000     0.001        1   MyServer#handle_request 
  2.60      0.000     0.000     0.000     0.000        1   String#gsub 
  2.43      0.000     0.000     0.000     0.000       12   Array#pack 
  2.18      0.000     0.000     0.000     0.000        9   Moped::BSON::Extensions::String#to_utf8_binary 
  2.02      0.000     0.000     0.000     0.000        1   Time#to_s 
  1.93      0.000     0.000     0.000     0.000        1   Moped::Node#ensure_connected 
  1.68      0.000     0.000     0.000     0.000        5  *Array#each 
  1.68      0.000     0.000     0.000     0.000        5   Moped::BSON::Extensions::String#to_bson_cstring 
  1.60      0.000     0.000     0.000     0.000        1   IO#write 
  1.60      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize 
  1.51      0.000     0.000     0.000     0.000        2   <Module::Kernel>#select 
  1.51      0.000     0.000     0.000     0.000        9   String#encode 
  1.43      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Hash#__bson_dump__ 
  1.34      0.000     0.000     0.000     0.000        1   Moped::Cluster#nodes 
  1.34      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_primary 
  1.26      0.000     0.000     0.000     0.000        6   Symbol#to_s 
  1.18      0.000     0.000     0.000     0.000        1   Hash#each 
  1.18      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#initialize 
  1.18      0.000     0.000     0.000     0.000        4   Class#new 
  1.09      0.000     0.000     0.000     0.000       11   String#force_encoding 
  1.09      0.001     0.000     0.000     0.001        1   Moped::Session#with 
  1.01      0.001     0.000     0.000     0.001        1   Moped::Cluster#with_primary 
  1.01      0.000     0.000     0.000     0.000        4   Fixnum#* 
  1.01      0.000     0.000     0.000     0.000        2   Moped::Threaded#begin 
  1.01      0.001     0.000     0.000     0.001        1   Moped::Session::Context#with_node 
  1.01      0.000     0.000     0.000     0.000        1   <Class::CGI>#unescape 
  0.92      0.000     0.000     0.000     0.000        1   Moped::Session#initialize_copy 
  0.92      0.000     0.000     0.000     0.000        2   Array#map 
  0.92      0.000     0.000     0.000     0.000        2   Kernel#nil? 
  0.84      0.000     0.000     0.000     0.000        8   String#bytesize 
  0.84      0.000     0.000     0.000     0.000        6   <Class::Thread>#current 
  0.84      0.000     0.000     0.000     0.000        1   Moped::Collection#initialize 
  0.84      0.000     0.000     0.000     0.000        1   Moped::Node#apply_auth 
  0.84      0.000     0.000     0.000     0.000        3   Fixnum#<=> 
  0.84      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#serialize_length 
  0.84      0.001     0.000     0.000     0.001        1   Moped::Node#flush 
  0.76      0.000     0.000     0.000     0.000        2   Moped::Node#down? 
  0.76      0.001     0.000     0.000     0.001        1   Moped::Node#logging 
  0.76      0.000     0.000     0.000     0.000        2   Moped::Threaded#end 
  0.76      0.000     0.000     0.000     0.000        4   <Class::BasicObject>#allocate 
  0.76      0.001     0.000     0.000     0.001        1   Moped::Collection#insert 
  0.76      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags_as_int 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Connection#with_connection 
  0.67      0.001     0.000     0.000     0.001        1   Moped::Node#process 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_full_collection_name 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh 
  0.67      0.000     0.000     0.000     0.000        1   Comparable#< 
  0.67      0.000     0.000     0.000     0.000        2  *Kernel#dup 
  0.67      0.000     0.000     0.000     0.000        1   Array#transpose 
  0.67      0.000     0.000     0.000     0.000        1   String#tr 
  0.67      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_request_id 
  0.67      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.67      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#length 
  0.67      0.000     0.000     0.000     0.000        1   Array#reject 
  0.59      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Integer#__bson_dump__ 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Node#needs_refresh? 
  0.59      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#alive? 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Session::Context#safe? 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_flags 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Node#auth 
  0.59      0.000     0.000     0.000     0.000        1   Kernel#remove_instance_variable 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Cluster#down_interval 
  0.59      0.000     0.000     0.000     0.000        1   Moped::Session::Context#cluster 
  0.59      0.000     0.000     0.000     0.000        3   Hash#[]= 
  0.59      0.001     0.000     0.000     0.001        1   Moped::Node#insert 
  0.50      0.001     0.000     0.000     0.001        1   Moped::Session::Context#insert 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Logging#logger 
  0.50      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.50      0.000     0.000     0.000     0.000        1   Hash#initialize_copy 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#handle_socket_errors 
  0.50      0.000     0.000     0.000     0.000        1   Array#concat 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_response_to 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Cluster#member? 
  0.50      0.000     0.000     0.000     0.000        3   Array#empty? 
  0.50      0.000     0.000     0.000     0.000        6   Thread#[] 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Cluster#max_retries 
  0.50      0.000     0.000     0.000     0.000        3   Moped::Node#connection 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Session::Context#consistency 
  0.50      0.000     0.000     0.000     0.000        2   String#[]= 
  0.50      0.000     0.000     0.000     0.000        2   Moped::Threaded#executing? 
  0.50      0.000     0.000     0.000     0.000        2   Time#- 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Session#safety 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_interval 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Cluster#auth 
  0.50      0.000     0.000     0.000     0.000        2   Array#pop 
  0.50      0.000     0.000     0.000     0.000        2  *Kernel#initialize_dup 
  0.50      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#write 
  0.42      0.000     0.000     0.000     0.000        5   String#include? 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#response_to 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_documents 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#request_id 
  0.42      0.000     0.000     0.000     0.000        1   Kernel#is_a? 
  0.42      0.000     0.000     0.000     0.000        1   Time#<=> 
  0.42      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Object#__safe_options__ 
  0.42      0.000     0.000     0.000     0.000        1   Array#include? 
  0.42      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.42      0.000     0.000     0.000     0.000        1   Integer#round 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#check_if_alive! 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Session#consistency 
  0.42      0.000     0.000     0.000     0.000        1   Enumerable#partition 
  0.42      0.000     0.000     0.000     0.000        1   Array#to_a 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Session#safe? 
  0.42      0.000     0.000     0.000     0.000        1   Logger#debug? 
  0.42      0.000     0.000     0.000     0.000        1   Moped::Session#[] 
  0.34      0.000     0.000     0.000     0.000        1   Symbol#to_proc 
  0.34      0.000     0.000     0.000     0.000        2   Bignum#<=> 
  0.34      0.000     0.000     0.000     0.000        1   Array#last 
  0.34      0.000     0.000     0.000     0.000        1   Hash#update 
  0.34      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.34      0.000     0.000     0.000     0.000        2   Fixnum#- 
  0.34      0.000     0.000     0.000     0.000        1   Enumerable#find 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Database#[] 
  0.34      0.000     0.000     0.000     0.000        1   Thread#[]= 
  0.34      0.000     0.000     0.000     0.000        1   Hash#== 
  0.34      0.000     0.000     0.000     0.000        1   Moped::Connection#write 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Session#current_database 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Connection#connected? 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#op_code 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_op_code 
  0.25      0.000     0.000     0.000     0.000        1   <Class::Moped::BSON::Document>#serialize 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Node#arbiter? 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Session::Context#initialize 
  0.25      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags 
  0.25      0.000     0.000     0.000     0.000        1   Moped::Node#connected? 
  0.25      0.000     0.000     0.000     0.000        2   Array#push 
  0.25      0.000     0.000     0.000     0.000        1   Array#clear 
  0.17      0.000     0.000     0.000     0.000        1   Array#zip 
  0.17      0.000     0.000     0.000     0.000        1   String#valid_encoding? 
  0.17      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.17      0.000     0.000     0.000     0.000        1   Moped::Connection#receive_replies 
  0.08      0.000     0.000     0.000     0.000        1   Symbol#== 
  0.08      0.000     0.000     0.000     0.000        1   Moped::Node#primary? 
  0.08      0.000     0.000     0.000     0.000        1   Moped::Protocol::Message#receive_replies 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> execute-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460641240
Total: 0.000474
Sort by: self_time

 %self      total      self      wait     child     calls  name
 16.67      0.000     0.000     0.000     0.000        3  *Kernel#inspect 
 13.71      0.000     0.000     0.000     0.000        1   Session::Command#initialize 
  7.38      0.000     0.000     0.000     0.000        7   IO#write 
  5.27      0.000     0.000     0.000     0.000        1   TerminalUser#execute 
  4.64      0.000     0.000     0.000     0.000        5   String#% 
  4.22      0.000     0.000     0.000     0.000        1   Session::AbstractSession#execute 
  3.16      0.000     0.000     0.000     0.000        1   Symbol#inspect 
  2.53      0.000     0.000     0.000     0.000        1   Session::Sh#execute 
  2.32      0.000     0.000     0.000     0.000        3   IO#puts 
  2.11      0.000     0.000     0.000     0.000        6   NilClass#inspect 
  2.11      0.000     0.000     0.000     0.000        1   Kernel#rand 
  1.90      0.000     0.000     0.000     0.000        4   <Class::Regexp>#escape 
  1.90      0.000     0.000     0.000     0.000        1   Class#new 
  1.90      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  1.90      0.000     0.000     0.000     0.000        2   String#inspect 
  1.90      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  1.69      0.000     0.000     0.000     0.000        1   Time#usec 
  1.69      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  1.69      0.000     0.000     0.000     0.000        2   String#to_s 
  1.48      0.000     0.000     0.000     0.000        2   <Class::Session::Command>#cmdno 
  1.48      0.000     0.000     0.000     0.000        3   IO#inspect 
  1.48      0.000     0.000     0.000     0.000        1   IO#printf 
  1.48      0.000     0.000     0.000     0.000        3   Kernel#puts 
  1.48      0.000     0.000     0.000     0.000        1   Proc#to_s 
  1.27      0.000     0.000     0.000     0.000        1   Hash#inspect 
  1.27      0.000     0.000     0.000     0.000        1   Array#inspect 
  1.27      0.000     0.000     0.000     0.000        1   Fixnum#to_s 
  1.05      0.000     0.000     0.000     0.000        3   Module#=== 
  1.05      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  1.05      0.000     0.000     0.000     0.000        1   Thread#inspect 
  1.05      0.000     0.000     0.000     0.000        1   <Class::Session::Command>#cmdno= 
  0.84      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.84      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  0.84      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.84      0.000     0.000     0.000     0.000        3   IO#closed? 
  0.63      0.000     0.000     0.000     0.000        1   IO#flush 
  0.42      0.000     0.000     0.000     0.000        2   Kernel#class 
  0.21      0.000     0.000     0.000     0.000        1   Kernel#respond_to_missing? 
  0.21      0.000     0.000     0.000     0.000        1   Fixnum#* 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> block_for_output_to_come-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460641240
Total: 0.000914
Sort by: self_time

 %self      total      self      wait     child     calls  name
  9.96      0.001     0.000     0.000     0.001        1   TerminalUser#block_for_output_to_come 
  8.75      0.001     0.000     0.001     0.000        1   Kernel#sleep 
  7.22      0.000     0.000     0.000     0.000        1   IO#puts 
  7.11      0.000     0.000     0.000     0.000        1   Kernel#puts 
  5.36      0.000     0.000     0.000     0.000        2   IO#write 
  0.77      0.000     0.000     0.000     0.000        1   StringIO#read 

* indicates recursively called methods
Thread ID: 70198582736660
Fiber ID: 70198460366680
Total: 0.000775
Sort by: self_time

 %self      total      self      wait     child     calls  name
 22.32      0.001     0.000     0.000     0.001        1   Session::AbstractSession#_initialize 
 11.35      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  7.23      0.000     0.000     0.000     0.000        1   IO#readpartial 
  5.94      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  4.39      0.000     0.000     0.000     0.000        1   Proc#call 
  4.00      0.000     0.000     0.000     0.000        1   Regexp#match 
  3.61      0.000     0.000     0.000     0.000        3   IO#closed? 
  3.61      0.000     0.000     0.000     0.000        3   Module#=== 
  1.68      0.000     0.000     0.000     0.000        1   IO#puts 
  1.68      0.000     0.000     0.000     0.000        1   Kernel#puts 
  1.55      0.000     0.000     0.000     0.000        2   IO#write 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from MyServer -> insert_mongodb-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460822220
Total: 0.001088
Sort by: self_time

 %self      total      self      wait     child     calls  name
  3.31      0.000     0.000     0.000     0.000        4   Moped::BSON::Extensions::String#__bson_dump__ 
  3.22      0.000     0.000     0.000     0.000        6   Moped::Threaded#stack 
  2.57      0.001     0.000     0.000     0.000        1   Moped::Node#ensure_connected 
  2.57      0.001     0.000     0.000     0.001        1   MyServer#handle_request 
  2.21      0.000     0.000     0.000     0.000        9   Moped::BSON::Extensions::String#to_utf8_binary 
  2.21      0.000     0.000     0.000     0.000        5   Moped::BSON::Extensions::String#to_bson_cstring 
  2.02      0.000     0.000     0.000     0.000        1   Time#to_s 
  1.93      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize 
  1.93      0.000     0.000     0.000     0.000        2   <Module::Kernel>#select 
  1.93      0.000     0.000     0.000     0.000       12   Array#pack 
  1.75      0.000     0.000     0.000     0.000        1   IO#write 
  1.65      0.000     0.000     0.000     0.000       11   String#force_encoding 
  1.56      0.001     0.000     0.000     0.001        1   Moped::Node#ensure_primary 
  1.47      0.000     0.000     0.000     0.000        6   Thread#[] 
  1.47      0.000     0.000     0.000     0.000        5  *Array#each 
  1.38      0.000     0.000     0.000     0.000        1   Hash#each 
  1.38      0.000     0.000     0.000     0.000        4   Class#new 
  1.29      0.001     0.000     0.000     0.001        1   Moped::Session::Context#with_node 
  1.29      0.000     0.000     0.000     0.000        1   Moped::Cluster#nodes 
  1.29      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Hash#__bson_dump__ 
  1.19      0.000     0.000     0.000     0.000        2   Moped::Threaded#begin 
  1.19      0.001     0.000     0.000     0.001        1   Moped::Session#with 
  1.19      0.001     0.000     0.000     0.001        1   Moped::Node#logging 
  1.19      0.000     0.000     0.000     0.000        9   String#encode 
  1.10      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#serialize_length 
  1.10      0.000     0.000     0.000     0.000        6   Symbol#to_s 
  1.10      0.000     0.000     0.000     0.000        1   <Class::CGI>#unescape 
  1.01      0.000     0.000     0.000     0.000        4   Fixnum#* 
  0.92      0.001     0.000     0.000     0.001        1   Moped::Collection#insert 
  0.92      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags_as_int 
  0.92      0.000     0.000     0.000     0.000        1   Array#reject 
  0.83      0.000     0.000     0.000     0.000        8   String#bytesize 
  0.83      0.000     0.000     0.000     0.000        2  *Kernel#dup 
  0.83      0.000     0.000     0.000     0.000        2   Array#pop 
  0.83      0.001     0.000     0.000     0.001        1   Moped::Cluster#with_primary 
  0.83      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh 
  0.83      0.000     0.000     0.000     0.000        3   Array#empty? 
  0.83      0.000     0.000     0.000     0.000        1   Moped::Session#initialize_copy 
  0.74      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Integer#__bson_dump__ 
  0.74      0.000     0.000     0.000     0.000        1   Array#zip 
  0.74      0.000     0.000     0.000     0.000        2   Moped::Protocol::Insert#length 
  0.74      0.000     0.000     0.000     0.000        1   Array#transpose 
  0.74      0.000     0.000     0.000     0.000        6   <Class::Thread>#current 
  0.74      0.001     0.000     0.000     0.001        1   Moped::Node#flush 
  0.74      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#initialize 
  0.74      0.000     0.000     0.000     0.000        2   Moped::Threaded#executing? 
  0.74      0.000     0.000     0.000     0.000        1   <Class::Moped::BSON::Document>#serialize 
  0.74      0.000     0.000     0.000     0.000        3   Hash#[]= 
  0.74      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#write 
  0.74      0.000     0.000     0.000     0.000        2   Moped::Threaded#end 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_full_collection_name 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Node#apply_auth 
  0.64      0.000     0.000     0.000     0.000        2   Moped::Sockets::Connectable#alive? 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_response_to 
  0.64      0.000     0.000     0.000     0.000        2   Moped::Node#down? 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Connection#write 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Collection#initialize 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Session::Context#cluster 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_request_id 
  0.64      0.000     0.000     0.000     0.000        1   Moped::Connection#with_connection 
  0.55      0.001     0.000     0.000     0.001        1   Moped::Node#process 
  0.55      0.000     0.000     0.000     0.000        1   Moped::Node#connected? 
  0.55      0.000     0.000     0.000     0.000        1   Moped::Node#needs_refresh? 
  0.55      0.000     0.000     0.000     0.000        1   Integer#round 
  0.55      0.000     0.000     0.000     0.000        1   Moped::Cluster#member? 
  0.55      0.001     0.000     0.000     0.001        1   Moped::Session::Context#insert 
  0.55      0.000     0.000     0.000     0.000        4   <Class::BasicObject>#allocate 
  0.55      0.001     0.000     0.000     0.001        1   Moped::Node#insert 
  0.55      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_op_code 
  0.55      0.000     0.000     0.000     0.000        1   Thread#[]= 
  0.55      0.000     0.000     0.000     0.000        2   Array#map 
  0.55      0.000     0.000     0.000     0.000        1   Moped::Cluster#auth 
  0.55      0.000     0.000     0.000     0.000        1   Hash#initialize_copy 
  0.55      0.000     0.000     0.000     0.000        1   Enumerable#find 
  0.55      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.46      0.000     0.000     0.000     0.000        2   Time#- 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#response_to 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Session#safe? 
  0.46      0.000     0.000     0.000     0.000        2   String#[]= 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_flags 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Session#[] 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#request_id 
  0.46      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Node#arbiter? 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Node#auth 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Database#[] 
  0.46      0.000     0.000     0.000     0.000        5   String#include? 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Session#consistency 
  0.46      0.000     0.000     0.000     0.000        1   Moped::BSON::Extensions::Object#__safe_options__ 
  0.46      0.000     0.000     0.000     0.000        1   Hash#== 
  0.46      0.000     0.000     0.000     0.000        1   Hash#update 
  0.46      0.000     0.000     0.000     0.000        1   Time#<=> 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Session::Context#safe? 
  0.46      0.000     0.000     0.000     0.000        1   Moped::Cluster#down_interval 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#check_if_alive! 
  0.37      0.000     0.000     0.000     0.000        1   Symbol#to_proc 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Session#safety 
  0.37      0.000     0.000     0.000     0.000        1   Moped::Sockets::Connectable#handle_socket_errors 
  0.37      0.000     0.000     0.000     0.000        1   Array#last 
  0.37      0.000     0.000     0.000     0.000        1   Symbol#== 
  0.37      0.000     0.000     0.000     0.000        1   Enumerable#partition 
  0.37      0.000     0.000     0.000     0.000        2  *Kernel#initialize_dup 
  0.37      0.000     0.000     0.000     0.000        1   Kernel#is_a? 
  0.37      0.000     0.000     0.000     0.000        1   String#gsub 
  0.37      0.000     0.000     0.000     0.000        3   Fixnum#<=> 
  0.28      0.000     0.000     0.000     0.000        1   Array#include? 
  0.28      0.000     0.000     0.000     0.000        2   Bignum#<=> 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Node#primary? 
  0.28      0.000     0.000     0.000     0.000        2   Kernel#nil? 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session::Context#initialize 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#serialize_documents 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session#current_database 
  0.28      0.000     0.000     0.000     0.000        1   Comparable#< 
  0.28      0.000     0.000     0.000     0.000        1   Array#concat 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Session::Context#consistency 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#flags 
  0.28      0.000     0.000     0.000     0.000        1   Kernel#block_given? 
  0.28      0.000     0.000     0.000     0.000        1   Moped::Cluster#max_retries 
  0.28      0.000     0.000     0.000     0.000        1   Array#clear 
  0.28      0.000     0.000     0.000     0.000        3   Moped::Node#connection 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Protocol::Message#receive_replies 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Cluster#refresh_interval 
  0.18      0.000     0.000     0.000     0.000        1   Kernel#remove_instance_variable 
  0.18      0.000     0.000     0.000     0.000        1   Logger#debug? 
  0.18      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.18      0.000     0.000     0.000     0.000        1   String#tr 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Logging#logger 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Connection#connected? 
  0.18      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Connection#receive_replies 
  0.18      0.000     0.000     0.000     0.000        1   Array#to_a 
  0.18      0.000     0.000     0.000     0.000        1   Moped::Protocol::Insert#op_code 
  0.18      0.000     0.000     0.000     0.000        1   <Class::Hash>#allocate 
  0.18      0.000     0.000     0.000     0.000        2   Array#push 
  0.18      0.000     0.000     0.000     0.000        2   Fixnum#- 
  0.09      0.000     0.000     0.000     0.000        1   String#valid_encoding? 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> execute-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460822220
Total: 0.000370
Sort by: self_time

 %self      total      self      wait     child     calls  name
 18.11      0.000     0.000     0.000     0.000        1   Session::Command#initialize 
 11.62      0.000     0.000     0.000     0.000        1   TerminalUser#execute 
  8.65      0.000     0.000     0.000     0.000        3  *Kernel#inspect 
  7.57      0.000     0.000     0.000     0.000        5   String#% 
  5.95      0.000     0.000     0.000     0.000        7   IO#write 
  4.59      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
  4.32      0.000     0.000     0.000     0.000        1   Session::AbstractSession#execute 
  3.51      0.000     0.000     0.000     0.000        3   IO#inspect 
  2.70      0.000     0.000     0.000     0.000        4   <Class::Regexp>#escape 
  2.70      0.000     0.000     0.000     0.000        3   Kernel#puts 
  2.16      0.000     0.000     0.000     0.000        3   IO#puts 
  1.89      0.000     0.000     0.000     0.000        1   Kernel#rand 
  1.89      0.000     0.000     0.000     0.000        1   Session::Sh#execute 
  1.89      0.000     0.000     0.000     0.000        1   Hash#inspect 
  1.62      0.000     0.000     0.000     0.000        1   Time#usec 
  1.35      0.000     0.000     0.000     0.000        6   NilClass#inspect 
  1.35      0.000     0.000     0.000     0.000        3   IO#closed? 
  1.35      0.000     0.000     0.000     0.000        1   Class#new 
  1.35      0.000     0.000     0.000     0.000        1   Symbol#inspect 
  1.08      0.000     0.000     0.000     0.000        2   String#inspect 
  1.08      0.000     0.000     0.000     0.000        1   Array#inspect 
  1.08      0.000     0.000     0.000     0.000        1   Thread#inspect 
  1.08      0.000     0.000     0.000     0.000        1   <Class::Time>#now 
  1.08      0.000     0.000     0.000     0.000        1   IO#printf 
  0.81      0.000     0.000     0.000     0.000        3   Module#=== 
  0.81      0.000     0.000     0.000     0.000        1   Proc#to_s 
  0.81      0.000     0.000     0.000     0.000        1   Fixnum#* 
  0.81      0.000     0.000     0.000     0.000        1   IO#flush 
  0.81      0.000     0.000     0.000     0.000        1   Time#initialize 
  0.54      0.000     0.000     0.000     0.000        1   Fixnum#to_s 
  0.54      0.000     0.000     0.000     0.000        1   Fixnum#+ 
  0.54      0.000     0.000     0.000     0.000        1   Kernel#respond_to_missing? 
  0.54      0.000     0.000     0.000     0.000        2   <Class::Session::Command>#cmdno 
  0.54      0.000     0.000     0.000     0.000        2   Fixnum#divmod 
  0.54      0.000     0.000     0.000     0.000        1   <Class::BasicObject>#allocate 
  0.54      0.000     0.000     0.000     0.000        2   String#to_s 
  0.54      0.000     0.000     0.000     0.000        1   <Class::Session::Command>#cmdno= 
  0.27      0.000     0.000     0.000     0.000        2   Kernel#class 
  0.27      0.000     0.000     0.000     0.000        1   <Class::Time>#allocate 

* indicates recursively called methods
----------------------------------------------------------------------------
Profiler result from TerminalUser -> block_for_output_to_come-----------------------------------------
Thread ID: 70198582569480
Fiber ID: 70198460822220
Total: 0.000579
Sort by: self_time

 %self      total      self      wait     child     calls  name
 20.73      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  9.50      0.001     0.000     0.000     0.001        1   TerminalUser#block_for_output_to_come 
  1.55      0.000     0.000     0.000     0.000        1   IO#puts 
  1.38      0.000     0.000     0.000     0.000        1   Kernel#puts 
  1.21      0.000     0.000     0.000     0.000        1   StringIO#read 
  0.52      0.000     0.000     0.000     0.000        2   IO#write 

* indicates recursively called methods
Thread ID: 70198582736660
Fiber ID: 70198460366680
Total: 0.000395
Sort by: self_time

 %self      total      self      wait     child     calls  name
 24.30      0.000     0.000     0.000     0.000        1   Session::AbstractSession#_initialize 
 22.03      0.000     0.000     0.000     0.000        1   Session::AbstractSession#ready? 
 12.91      0.000     0.000     0.000     0.000        1   Kernel#sleep 
  7.34      0.000     0.000     0.000     0.000        1   IO#readpartial 
  5.32      0.000     0.000     0.000     0.000        3   Module#=== 
  3.54      0.000     0.000     0.000     0.000        1   Regexp#match 
  3.04      0.000     0.000     0.000     0.000        1   IO#puts 
  3.04      0.000     0.000     0.000     0.000        1   Proc#call 
  2.03      0.000     0.000     0.000     0.000        3   IO#closed? 
  1.52      0.000     0.000     0.000     0.000        2   IO#write 
  1.52      0.000     0.000     0.000     0.000        1   Kernel#puts 

* indicates recursively called methods
----------------------------------------------------------------------------
